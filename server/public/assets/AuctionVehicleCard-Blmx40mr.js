import{a as Z,j as e,m as W,c as C,I as c,B as S,r as j}from"./index-zfRgVEOB.js";import{C as G}from"./checkbox-BRaKOQVN.js";let F=typeof window<"u"?window.innerWidth<768:!1;const M=new Set;if(typeof window<"u"){let t;window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{const o=window.innerWidth<768;o!==F&&(F=o,M.forEach(i=>i()))},100)})}function V(){const t=j.useCallback(w=>(M.add(w),()=>M.delete(w)),[]),o=j.useCallback(()=>F,[]),i=j.useCallback(()=>!1,[]);return j.useSyncExternalStore(t,o,i)}const U=(t,o="USD")=>{if(t==null)return null;const i=typeof t=="number"?t:Number(t);return Number.isFinite(i)?o==="GEL"?`${i.toLocaleString()} GEL`:`$${i.toLocaleString()}`:null};function ae({item:t,isSelected:o=!1,onToggleSelect:i,onCalculate:w,onViewDetails:r,showCompareCheckbox:z=!1,priority:D=!1,onToggleWatch:_,isWatched:m=!1,variant:R="default",forceLayout:E,hideOdometer:H=!1,context:h="listing"}){const{t:s,i18n:L}=Z(),I=L.language?.startsWith("ka"),y=["ka","ka-GE",L.language||"en","en"],P=["იან","თებ","მარ","აპრ","მაი","ივნ","ივლ","აგვ","სექ","ოქტ","ნოე","დეკ"],Y=V(),K=E?E==="mobile":Y,d=R==="preview",v=t.primary_photo_url||t.primary_thumb_url||"/cars/1.webp",p=t.last_bid;let b=0,x=null;if(p&&p.bid!=null)b=p.bid,x=p.bid_time;else if(t.calc_price!=null){const a=typeof t.calc_price=="number"?t.calc_price:Number(t.calc_price);Number.isFinite(a)&&(b=Math.max(0,a))}const T=a=>{if(!a)return"";try{const l=new Date(a);if(I){const n=P[l.getMonth()],A=l.getDate(),k=l.getFullYear(),$=l.getHours().toString().padStart(2,"0"),u=l.getMinutes().toString().padStart(2,"0");return`${n} ${A}, ${k}, ${$}:${u}`}return new Intl.DateTimeFormat(y,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}).format(l)}catch{return""}};let f=null;if(t.buy_it_now_price!=null){const a=typeof t.buy_it_now_price=="number"?t.buy_it_now_price:Number(t.buy_it_now_price);Number.isFinite(a)&&a>0&&(f=a)}else if(t.buy_it_now!=null){const a=typeof t.buy_it_now=="number"?t.buy_it_now:Number(t.buy_it_now);Number.isFinite(a)&&a>0&&(f=a)}const g=f!=null,N=g?U(f):null;if(K){const a=t.mileage?`${t.mileage.toLocaleString()} ${s("common.miles_short")} (E)`:"N/A",l=(()=>{if(!t.sold_at_date)return null;try{const n=new Date(t.sold_at_date),k=n>new Date,$=I?`${P[n.getMonth()]} ${n.getDate()}, ${n.getFullYear()}`:new Intl.DateTimeFormat(y,{month:"short",day:"numeric",year:"numeric"}).format(n);let u="";if(t.sold_at_time){const[O,Q]=t.sold_at_time.split(":"),B=parseInt(O,10),X=B>=12?"PM":"AM";u=`${B%12||12}:${Q} ${X}`}else u=new Intl.DateTimeFormat(y,{hour:"numeric",minute:"2-digit",hour12:!0}).format(n);return{date:$,time:u,isUpcoming:k}}catch{return null}})();return e.jsx(W.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.15},className:"w-full mb-1.5",children:e.jsxs("div",{className:C("auction-card-mobile w-full overflow-hidden bg-white border border-slate-200 shadow-md flex flex-col",h==="similar"&&"similar-vehicle-card force-horizontal-layout",h==="listing"&&"listing-vehicle-card"),children:[e.jsxs("div",{className:"auction-card-header px-4 py-3",children:[e.jsxs("h3",{className:"font-bold text-[16px] leading-snug text-slate-900 uppercase tracking-tight",children:[t.year," ",t.make," ",t.model]}),e.jsxs("p",{className:"text-[13px] text-slate-600 mt-0.5",children:[s("auction.lot")," ",t.source_lot_id||t.id]})]}),e.jsxs("div",{className:"auction-card-middle flex items-stretch",style:{minHeight:h==="similar"?"100px":void 0,maxHeight:h==="similar"?"120px":void 0},children:[e.jsxs("div",{className:"auction-card-image relative flex-shrink-0",children:[d?e.jsx("div",{className:"w-full h-full bg-slate-100 overflow-hidden",children:e.jsx("img",{src:v,alt:`${t.year} ${t.make} ${t.model}`,className:"w-full h-full object-cover",loading:"lazy",style:{imageRendering:"auto"}})}):e.jsx("button",{type:"button",className:"w-full h-full bg-slate-100 focus:outline-none cursor-pointer overflow-hidden",onClick:r,"aria-label":s("auction.view_vehicle_details"),children:e.jsx("img",{src:v,alt:`${t.year} ${t.make} ${t.model}`,className:"w-full h-full object-cover",loading:D?"eager":"lazy"})}),z&&!d&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(G,{id:`compare-${t.id}`,checked:o,onCheckedChange:n=>i?.(!!n),className:"w-4 h-4 bg-white border-slate-300"})})]}),e.jsxs("div",{className:"auction-card-info flex flex-col justify-start p-3 gap-1 bg-slate-100",children:[!H&&e.jsxs("div",{className:"mb-1",children:[e.jsx("p",{className:"text-[13px] font-bold text-slate-800",children:s("auction.fields.odometer")}),e.jsx("p",{className:"text-[13px] text-slate-600",children:a})]}),e.jsxs("div",{className:"mb-1",children:[e.jsxs("p",{className:"text-[13px] font-bold text-slate-800",children:[s("auction.fields.current_bid"),":"]}),e.jsxs("p",{className:"text-[15px] font-bold text-slate-900",children:[U(b)," ",e.jsx("span",{className:"text-[12px] font-normal text-slate-500",children:"USD"})]}),x&&e.jsx("p",{className:"text-[10px] text-slate-500",children:T(x)})]}),g&&N&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-[13px] font-bold text-slate-800",children:[s("auction.buy_now_label"),":"]}),e.jsxs("p",{className:"text-[15px] font-bold text-slate-900",children:[N," ",e.jsx("span",{className:"text-[12px] font-normal text-slate-500",children:"USD"})]})]}),l&&e.jsxs("div",{className:"mt-1 flex flex-col gap-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(c,{icon:l.isUpcoming?"mdi:calendar-clock":"mdi:calendar-check",className:`w-3.5 h-3.5 ${l.isUpcoming?"text-emerald-600":"text-slate-500"}`}),e.jsx("span",{className:`text-[11px] font-semibold uppercase tracking-wide ${l.isUpcoming?"text-emerald-700":"text-slate-600"}`,children:l.isUpcoming?s("auction.auction_starts"):s("auction.auction_start_date")})]}),e.jsx("div",{className:`text-[13px] font-bold ${l.isUpcoming?"text-emerald-800":"text-slate-700"}`,children:l.date}),e.jsx("div",{className:`text-[12px] font-semibold ${l.isUpcoming?"text-emerald-600":"text-slate-500"}`,children:l.time})]})]})]}),!d&&e.jsxs("div",{className:"auction-card-buttons grid grid-cols-3 border-t border-slate-200",children:[e.jsxs("button",{type:"button",className:"flex items-center justify-center gap-1.5 h-[44px] bg-accent hover:bg-accent/90 text-slate-900 font-semibold text-[13px] transition-colors",onClick:r,children:[e.jsx(c,{icon:"mdi:plus-circle-outline",className:"w-4 h-4"}),s("common.details")]}),e.jsxs("button",{type:"button",className:C("flex items-center justify-center gap-1.5 h-[44px] font-semibold text-[13px] transition-colors border-l border-slate-200",m?"bg-green-50 text-green-600":"bg-white hover:bg-slate-50 text-blue-600"),onClick:n=>{n.stopPropagation(),_?.()},children:[e.jsx(c,{icon:m?"mdi:star":"mdi:star-outline",className:"w-4 h-4"}),s("auction.actions.watch")]}),e.jsx("button",{type:"button",className:"flex items-center justify-center gap-1.5 h-[44px] bg-[#2563eb] hover:bg-[#1d4ed8] text-white font-semibold text-[13px] transition-colors border-l border-slate-200",onClick:r,children:s("auction.actions.bid_now")})]})]})})}const q=t.sale_title_type?.toLowerCase().includes("clean"),J=t.run_and_drive?.toLowerCase().includes("run");return e.jsx("div",{className:"h-full",children:e.jsxs("div",{className:"group relative h-full overflow-hidden rounded-2xl bg-white/90 border border-slate-200/80 shadow-sm hover:shadow-xl hover:-translate-y-0.5 transition-all duration-200 flex flex-col",children:[e.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden bg-slate-100",children:[e.jsx("button",{type:"button",className:"w-full h-full focus:outline-none cursor-pointer",onClick:r,children:e.jsx("img",{src:v,alt:`${t.year} ${t.make} ${t.model}`,className:"h-full w-full object-cover",loading:D?"eager":"lazy"})}),z&&!d&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(G,{id:`compare-${t.id}`,checked:o,onCheckedChange:a=>i?.(!!a),className:"w-4 h-4 bg-white border-slate-300"})}),_&&!d&&e.jsx("button",{onClick:a=>{a.stopPropagation(),_()},className:"absolute top-2 right-2 bg-black/50 p-1 rounded hover:bg-black/70 transition-colors",children:e.jsx(c,{icon:m?"mdi:heart":"mdi:heart-outline",className:C("w-4 h-4",m?"text-green-500":"text-white")})}),e.jsxs("div",{className:"absolute bottom-2 left-2 bg-black/60 text-white text-[9px] px-1.5 py-0.5 rounded flex items-center gap-1",children:[e.jsx(c,{icon:"mdi:camera",className:"w-3 h-3"}),e.jsx("span",{children:"12"})]})]}),e.jsxs("div",{className:"flex flex-col flex-1 p-3",children:[e.jsx("button",{onClick:r,className:"text-left mb-1.5",children:e.jsxs("h3",{className:"font-semibold text-[13px] text-slate-900 hover:text-primary leading-snug line-clamp-2",children:[t.year," ",t.make," ",t.model]})}),e.jsxs("div",{className:"text-[10px] text-slate-500 mb-1.5",children:[s("auction.lot")," ",t.source_lot_id||t.id]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1 mb-2",children:[q&&e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] font-semibold text-green-700 bg-green-50 px-1.5 py-0.5 rounded",children:[e.jsx(c,{icon:"mdi:check-circle",className:"w-2.5 h-2.5"}),s("auction.badges.clean_title")]}),J&&e.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[8px] font-semibold text-blue-700 bg-blue-50 px-1.5 py-0.5 rounded",children:[e.jsx(c,{icon:"mdi:car",className:"w-2.5 h-2.5"}),s("auction.badges.run_drive")]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-slate-500 mb-2",children:[e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(c,{icon:"mdi:speedometer",className:"w-3 h-3"}),t.mileage?`${(t.mileage/1e3).toFixed(0)}k ${s("common.miles_short")}`:"N/A"]}),e.jsxs("span",{className:"flex items-center gap-0.5",children:[e.jsx(c,{icon:"mdi:gas-station",className:"w-3 h-3"}),t.fuel_type||s("common.fuel_gas")]})]}),e.jsxs("div",{className:"mt-auto space-y-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[9px] text-slate-400 uppercase",children:s("auction.fields.current_bid")}),e.jsxs("div",{className:"text-[16px] font-semibold text-slate-900",children:[U(b)," ",e.jsx("span",{className:"text-[9px] font-normal text-slate-400",children:"USD"})]}),x&&e.jsx("div",{className:"text-[9px] text-slate-400",children:T(x)}),g&&N&&e.jsxs("div",{className:"text-[10px] text-green-600 font-semibold",children:[s("auction.buy_now_label"),": ",N]})]}),!d&&e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx(S,{size:"sm",className:"w-full h-7 text-[11px] rounded-full bg-accent hover:bg-accent/90 text-primary font-semibold",onClick:r,children:s("auction.actions.bid_now")}),g?e.jsx(S,{size:"sm",className:"w-full h-7 text-[11px] rounded-full bg-accent hover:bg-accent/90 text-primary font-semibold",onClick:r,children:s("auction.actions.buy_it_now")}):e.jsx(S,{size:"sm",variant:"outline",className:"w-full h-7 text-[11px] rounded-full border-slate-300 text-slate-600 font-medium hover:bg-slate-50",onClick:r,children:s("common.details")})]})]})]})]})})}export{ae as A};
