import{E as Ve,r as a,a as z,j as e,I as b,c as v,b as je,B as D,a4 as ls,w as is,u as De,z as Re,S as ne,m as Ie,C as Le}from"./index-C73nPcCf.js";import{a as fe}from"./formatDate-BODqZ6W4.js";import{c as Me}from"./confetti.module-C_1cc0iU.js";import{C as ns}from"./checkbox-CkcJ5zYN.js";import{D as G,a as X,b as K,c as J,d as Z,e as ge}from"./dialog-BJJ_SERa.js";import{L as ie}from"./label-DBjhGHyJ.js";import{T as rs}from"./textarea-D00ZvZ9F.js";import{c as be,f as cs,a as os}from"./vehicles-CkoVp8JG.js";import{u as Oe}from"./useVehicleWatchlist-Cq9yClrB.js";import{C as ds,a as ms}from"./chevron-right-Bdf5WeEZ.js";const us=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],xs=Ve("ellipsis",us);const hs=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],ps=Ve("external-link",hs);function Pe(s){return s==="c"?"Bike":"Sedan"}function fs(s,l){const[r,c]=a.useState(null),[h,p]=a.useState([]),[u,n]=a.useState([]),[o,m]=a.useState(null),[j,t]=a.useState(!1),[d,x]=a.useState(!1),[C,i]=a.useState(null),[y,w]=a.useState(0),[F,_]=a.useState(!0),[O,W]=a.useState(null),[q,Q]=a.useState(0),[R,f]=a.useState(l?.initialLimit??5),[U,P]=a.useState(0),[E,we]=a.useState(l?.initialMinRating??null);a.useEffect(()=>{if(!s)return;let k=!0;return(async()=>{t(!0),i(null);try{const N=await cs(s);if(!k)return;c(N.vehicle),p(N.photos)}catch(N){if(!k)return;const I=N instanceof Error?N.message:"Failed to load vehicle details";i(I)}finally{k&&t(!1)}})(),()=>{k=!1}},[s,y]);const[Ne,te]=a.useState(!1);a.useEffect(()=>{if(!s||!r)return;const k=r.source||"",A=r.yard_name||"";if(!k||!A){_(!1),W("Vehicle location data is incomplete. Cannot calculate shipping quotes."),n([]);return}let N=!0;return(async()=>{te(!0);try{const T=Pe(r.vehicle_type),L=await be(s,k,A,"usd",{limit:R,offset:0,...E!==null&&{minRating:E},vehiclecategory:T});if(!N)return;const ae=L.price_available!==!1;_(ae),W(ae?null:L.message||"Price calculation not available"),m(L.distance_miles??null);const ee=Array.isArray(L.quotes)?L.quotes:[];n(ee),P(ee.length),typeof L.total=="number"?Q(L.total):Q(ee.length)}catch{if(!N)return;m(null),n([]),Q(0),_(!1),W("Failed to load shipping quotes. Please try again.")}finally{N&&te(!1)}})(),()=>{N=!1}},[s,r,y,R,E]);const H=a.useCallback(async()=>{if(!s||!r||d||U>=q)return;const k=r.source||"",A=r.yard_name||"";if(!(!k||!A)){x(!0);try{const N=Pe(r.vehicle_type),I=await be(s,k,A,"usd",{limit:R,offset:U,...E!==null&&{minRating:E},vehiclecategory:N}),T=Array.isArray(I.quotes)?I.quotes:[];n(L=>[...L,...T]),P(L=>L+T.length),typeof I.total=="number"&&Q(I.total)}catch{}finally{x(!1)}}},[s,r,d,U,q,R,E]),ce=()=>{P(0),w(k=>k+1)},oe=a.useCallback(k=>{f(k)},[]),de=a.useCallback(k=>{we(k)},[]),me=U<q;return{vehicle:r,photos:h,quotes:u,distanceMiles:o,isLoading:j,isLoadingMore:d,isRefreshingQuotes:Ne,error:C,priceAvailable:F,priceUnavailableMessage:O,recalculate:ce,quotesTotal:q,quotesLimit:R,hasMoreQuotes:me,loadMoreQuotes:H,setQuotesLimit:oe,minRating:E,setMinRating:de}}const Ee=(s,l="USD")=>{if(s==null)return null;const r=typeof s=="number"?s:Number(s);return Number.isFinite(r)?l==="GEL"?`${r.toLocaleString()} GEL`:`$${r.toLocaleString()}`:null};function gs({item:s,onViewDetails:l,onToggleWatch:r,isWatched:c=!1,priority:h=!1}){const{t:p}=z(),u=s.primary_photo_url||s.primary_thumb_url||"/cars/1.webp",n=s.last_bid;let o=0;if(n&&n.bid!=null)o=n.bid;else if(s.calc_price!=null){const d=typeof s.calc_price=="number"?s.calc_price:Number(s.calc_price);Number.isFinite(d)&&(o=Math.max(0,d))}let m=null;if(s.buy_it_now_price!=null){const d=typeof s.buy_it_now_price=="number"?s.buy_it_now_price:Number(s.buy_it_now_price);Number.isFinite(d)&&d>0&&(m=d)}else if(s.buy_it_now!=null){const d=typeof s.buy_it_now=="number"?s.buy_it_now:Number(s.buy_it_now);Number.isFinite(d)&&d>0&&(m=d)}const j=m!=null,t=j?Ee(m):null;return e.jsx("div",{className:"similar-vehicle-card-wrapper w-full h-full",children:e.jsxs("div",{className:"similar-vehicle-card-inner bg-white border border-slate-200 shadow-md flex flex-col h-full overflow-hidden rounded-lg",children:[e.jsxs("div",{className:"px-3 py-2",children:[e.jsxs("h3",{className:"font-bold text-[14px] leading-snug text-slate-900 uppercase tracking-tight truncate",children:[s.year," ",s.make," ",s.model]}),e.jsxs("p",{className:"text-[11px] text-slate-600 mt-0.5",children:[p("auction.lot")," ",s.source_lot_id||s.id]})]}),e.jsxs("div",{className:"flex flex-row items-stretch",style:{minHeight:"100px",maxHeight:"120px"},children:[e.jsx("div",{className:"relative w-1/2 flex-shrink-0",children:e.jsx("button",{type:"button",className:"w-full h-full bg-slate-100 focus:outline-none cursor-pointer overflow-hidden",onClick:l,"aria-label":p("auction.view_vehicle_details"),children:e.jsx("img",{src:u,alt:`${s.year} ${s.make} ${s.model}`,className:"w-full h-full object-cover",loading:h?"eager":"lazy"})})}),e.jsxs("div",{className:"w-1/2 flex flex-col justify-start p-2 gap-1 bg-slate-100",children:[e.jsxs("div",{className:"mb-1",children:[e.jsxs("p",{className:"text-[11px] font-bold text-slate-800",children:[p("auction.fields.current_bid"),":"]}),e.jsxs("p",{className:"text-[13px] font-bold text-slate-900",children:[Ee(o)," ",e.jsx("span",{className:"text-[10px] font-normal text-slate-500",children:"USD"})]})]}),j&&t&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-[11px] font-bold text-slate-800",children:[p("auction.buy_now_label"),":"]}),e.jsxs("p",{className:"text-[13px] font-bold text-slate-900",children:[t," ",e.jsx("span",{className:"text-[10px] font-normal text-slate-500",children:"USD"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 border-t border-slate-200 mt-auto",children:[e.jsxs("button",{type:"button",className:"flex items-center justify-center gap-1 h-[36px] bg-accent hover:bg-accent/90 text-slate-900 font-semibold text-[11px] transition-colors",onClick:l,children:[e.jsx(b,{icon:"mdi:plus-circle-outline",className:"w-3.5 h-3.5"}),p("common.details")]}),e.jsxs("button",{type:"button",className:v("flex items-center justify-center gap-1 h-[36px] font-semibold text-[11px] transition-colors border-l border-slate-200",c?"bg-green-50 text-green-600":"bg-white hover:bg-slate-50 text-blue-600"),onClick:d=>{d.stopPropagation(),r?.()},children:[e.jsx(b,{icon:c?"mdi:star":"mdi:star-outline",className:"w-3.5 h-3.5"}),p("auction.actions.watch")]}),e.jsx("button",{type:"button",className:"flex items-center justify-center gap-1 h-[36px] bg-[#2563eb] hover:bg-[#1d4ed8] text-white font-semibold text-[11px] transition-colors border-l border-slate-200",onClick:l,children:p("auction.actions.bid_now")})]})]})})}const bs=({year:s,make:l,model:r})=>{const c=je(),{t:h}=z();return e.jsxs("header",{className:"vehicle-header space-y-2 mb-4",children:[e.jsx("div",{className:"vehicle-header-row flex items-center justify-between mb-2",children:e.jsxs(D,{type:"button",variant:"ghost",size:"sm",onClick:()=>c(-1),className:"flex items-center gap-1 px-0 h-auto text-primary text-[13px] font-medium hover:underline",children:[e.jsx(b,{icon:"mdi:arrow-left",className:"w-4 h-4"}),h("vehicle.back_to_results")]})}),e.jsx("div",{className:"vehicle-header-title-row",children:e.jsxs("h1",{className:"vehicle-header-title text-2xl sm:text-3xl font-bold text-primary uppercase",children:[s," ",l," ",r]})})]})},ve="urlchange";function vs(s){return typeof window>"u"?null:new URLSearchParams(window.location.search).get(s)}function js(s,l,r="replace"){if(typeof window>"u")return;const c=new URL(window.location.href);l===null||l===""?c.searchParams.delete(s):c.searchParams.set(s,l);const h=c.pathname+c.search+c.hash;r==="push"?window.history.pushState({[s]:l},"",h):window.history.replaceState({[s]:l},"",h),window.dispatchEvent(new CustomEvent(ve,{detail:{name:s,value:l}}))}function ws(s="page"){const l=a.useCallback(()=>{const u=vs(s);if(u===null)return 1;const n=parseInt(u,10);return isNaN(n)||n<1?1:n},[s]),[r,c]=a.useState(l),h=a.useRef(!1),p=a.useCallback(u=>{const n=Math.max(1,u);c(n),h.current=!0;const o=n<=1?null:String(n);js(s,o,"replace")},[s]);return a.useEffect(()=>{const u=()=>{const o=l();c(o)},n=o=>{if(h.current){h.current=!1;return}if(o.detail?.name===s){const j=l();c(j)}};return window.addEventListener("popstate",u),window.addEventListener(ve,n),()=>{window.removeEventListener("popstate",u),window.removeEventListener(ve,n)}},[s,l]),[r,p]}function Ns({vehicleId:s,auction:l,usacity:r,limit:c=5,vehiclecategory:h}){const[p,u]=ws("quotesPage"),n=a.useRef(null),[o,m]=a.useState({quotes:[],total:0,totalPages:1,isLoading:!1,error:null});a.useEffect(()=>{n.current!==null&&n.current!==s&&u(1),n.current=s},[s]),a.useEffect(()=>{if(!s||!l||!r){m({quotes:[],total:0,totalPages:1,isLoading:!1,error:null});return}let d=!0;const x=(p-1)*c;return(async()=>{m(i=>({...i,isLoading:!0,error:null}));try{const i=await be(s,l,r,"usd",{limit:c,offset:x,...h&&{vehiclecategory:h}});if(!d)return;const y=i.totalPages||1;if(p>y&&y>0){u(y);return}m({quotes:i.quotes||[],total:i.total||0,totalPages:y,isLoading:!1,error:null})}catch(i){if(!d)return;m({quotes:[],total:0,totalPages:1,isLoading:!1,error:i instanceof Error?i.message:"Failed to load quotes"})}})(),()=>{d=!1}},[s,l,r,p,c,h]);const j=a.useCallback(d=>{const x=Math.max(1,d);u(x)},[u]),t=a.useMemo(()=>{if(!o.quotes.length)return{min:0,max:0,avg:0};const d=o.quotes.map(x=>Number(x.total_price)||0).filter(x=>x>0);return d.length?{min:Math.min(...d),max:Math.max(...d),avg:d.reduce((x,C)=>x+C,0)/d.length}:{min:0,max:0,avg:0}},[o.quotes]);return{quotes:o.quotes,total:o.total,totalPages:o.totalPages,currentPage:p,isLoading:o.isLoading,error:o.error,setPage:j,priceStats:t}}const Ue=({className:s,...l})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:v("mx-auto flex w-full justify-center",s),...l});Ue.displayName="Pagination";const Fe=a.forwardRef(({className:s,...l},r)=>e.jsx("ul",{ref:r,className:v("flex flex-row items-center gap-1",s),...l}));Fe.displayName="PaginationContent";const se=a.forwardRef(({className:s,...l},r)=>e.jsx("li",{ref:r,className:v("",s),...l}));se.displayName="PaginationItem";const re=({className:s,isActive:l,size:r="icon",...c})=>e.jsx("a",{"aria-current":l?"page":void 0,className:v(ls({variant:l?"outline":"ghost",size:r}),s),...c});re.displayName="PaginationLink";const qe=({className:s,...l})=>e.jsxs(re,{"aria-label":"Go to previous page",size:"default",className:v("gap-1 pl-2.5",s),...l,children:[e.jsx(ds,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});qe.displayName="PaginationPrevious";const Qe=({className:s,...l})=>e.jsxs(re,{"aria-label":"Go to next page",size:"default",className:v("gap-1 pr-2.5",s),...l,children:[e.jsx("span",{children:"Next"}),e.jsx(ms,{className:"h-4 w-4"})]});Qe.displayName="PaginationNext";const Ae=({className:s,...l})=>e.jsxs("span",{"aria-hidden":!0,className:v("flex h-9 w-9 items-center justify-center",s),...l,children:[e.jsx(xs,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"More pages"})]});Ae.displayName="PaginationEllipsis";const ys=({filteredQuotes:s,priceStats:l,error:r,isLoading:c=!1,priceAvailable:h=!0,priceUnavailableMessage:p,onOpenBreakdown:u,onOpenLeadModal:n,currentPage:o=1,totalPages:m=1,onPageChange:j})=>{const{t,i18n:d}=z(),x=l.min,C=i=>{try{const y=(d.resolvedLanguage||d.language||"en").split("-")[0],w=y==="ge"?"ka":y;return new Intl.NumberFormat(w,{style:"currency",currency:"USD",maximumFractionDigits:0}).format(i)}catch{return`$${i.toLocaleString("en-US",{minimumFractionDigits:0})}`}};return c?e.jsxs("section",{className:"rounded-lg border border-slate-200 bg-white shadow-sm",children:[e.jsx("div",{className:"px-4 py-3 border-b border-slate-100",children:e.jsx("div",{className:"h-4 w-32 rounded bg-slate-100 animate-pulse"})}),e.jsx("div",{className:"p-4 space-y-3",children:[1,2,3].map(i=>e.jsxs("div",{className:"flex items-center gap-3 animate-pulse",children:[e.jsx("div",{className:"size-9 rounded-full bg-slate-100 shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsx("div",{className:"h-3.5 w-28 rounded bg-slate-100"}),e.jsx("div",{className:"h-3 w-20 rounded bg-slate-100"})]}),e.jsx("div",{className:"h-4 w-20 rounded bg-slate-100"})]},i))})]}):r?e.jsxs("section",{className:"rounded-lg border border-slate-200 bg-white shadow-sm p-6 text-center",children:[e.jsx("p",{className:"text-sm text-slate-600",children:r}),e.jsx(D,{variant:"ghost",size:"sm",className:"mt-3 text-xs",children:t("vehicle.quotes_section.try_again","Try again")})]}):h?s.length===0?e.jsx("section",{className:"rounded-lg border border-slate-200 bg-white shadow-sm p-6 text-center",children:e.jsx("p",{className:"text-sm text-slate-600",children:t("vehicle.quotes_section.empty","No offers available yet")})}):e.jsxs("section",{className:"vehicle-quotes-section rounded-lg border border-slate-200 bg-white shadow-sm overflow-hidden","aria-label":t("vehicle.quotes_section.aria_label","Import quotes"),children:[e.jsx("header",{className:"px-4 py-3 border-b border-slate-100 bg-slate-50/30",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsx("div",{className:"min-w-0",children:e.jsx("h2",{className:"text-[13px] font-semibold text-slate-900 uppercase tracking-wide",children:t("vehicle.quotes_section.title","Shipping Quotes")})}),x>0&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-[11px] text-slate-500 uppercase tracking-wide",children:t("vehicle.quotes_section.lowest_price","Lowest Price")}),e.jsx("div",{className:"text-lg font-bold text-emerald-600 tabular-nums",children:C(x)})]})]})}),e.jsx("div",{className:"divide-y divide-slate-100",children:s.map((i,y)=>{const w=Number(i.total_price)||0,F=i.company_rating!=null?i.company_rating.toFixed(1):t("vehicle.quotes_section.rating_na","N/A");return e.jsxs("div",{className:"vehicle-quotes-item px-4 py-3 flex items-center gap-3 min-w-0 transition-colors hover:bg-slate-50/50",children:[e.jsxs("div",{className:"size-9 rounded-full flex items-center justify-center text-xs font-semibold shrink-0 overflow-hidden bg-slate-100 text-slate-700",children:[i.logoUrl?e.jsx("img",{src:i.logoUrl,alt:i.company_name,className:"w-full h-full object-contain",onError:_=>{const O=_.target;O.style.display="none",O.nextSibling&&(O.nextSibling.style.display="flex")}}):null,e.jsx("span",{className:i.logoUrl?"hidden":"",children:i.company_name.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("button",{type:"button",onClick:()=>u(i),className:"font-medium text-slate-900 text-[13px] hover:text-primary transition-colors truncate focus:outline-none focus:underline capitalize",children:i.company_name}),y===0&&o===1&&e.jsx("span",{className:"text-[9px] font-bold text-blue-700 bg-blue-100 px-1.5 py-0.5 rounded uppercase tracking-wide shrink-0",children:t("vehicle.quotes_section.lowest_price","Lowest Price")})]}),e.jsx("div",{className:"flex items-center gap-2 mt-0.5 text-[11px] text-slate-500 flex-wrap",children:e.jsxs("span",{className:"shrink-0",children:["★ ",F]})})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0 flex-wrap justify-end",children:[e.jsx("button",{type:"button",onClick:()=>u(i),className:"text-right focus:outline-none focus:ring-2 focus:ring-primary/20 rounded px-1",children:e.jsx("div",{className:"text-base font-bold tabular-nums whitespace-nowrap text-slate-900",children:C(w)})}),i.website&&e.jsx("a",{href:i.website,target:"_blank",rel:"noopener noreferrer",className:"h-8 w-8 inline-flex items-center justify-center rounded-md border border-slate-300 bg-white text-slate-600 hover:bg-slate-50 hover:text-slate-900 transition-colors focus:outline-none focus:ring-2 focus:ring-primary/20 shrink-0","aria-label":"Open company website",onClick:_=>_.stopPropagation(),children:e.jsx(ps,{className:"size-3.5"})})]})]},i.company_id)})}),j&&m>1&&e.jsx("footer",{className:"px-4 py-3 bg-slate-50/50 border-t border-slate-100",children:e.jsx(Ue,{children:e.jsxs(Fe,{children:[e.jsx(se,{children:e.jsx(qe,{href:"#",onClick:i=>{i.preventDefault(),o>1&&!c&&j(o-1)},className:v("cursor-pointer",(o<=1||c)&&"pointer-events-none opacity-50")})}),(()=>{const i=[];if(m<=5)for(let w=1;w<=m;w++)i.push(w);else if(o<=3){for(let w=1;w<=4;w++)i.push(w);i.push("ellipsis"),i.push(m)}else if(o>=m-2){i.push(1),i.push("ellipsis");for(let w=m-3;w<=m;w++)i.push(w)}else i.push(1),i.push("ellipsis"),i.push(o-1),i.push(o),i.push(o+1),i.push("ellipsis"),i.push(m);return i.map((w,F)=>w==="ellipsis"?e.jsx(se,{children:e.jsx(Ae,{})},`ellipsis-${F}`):e.jsx(se,{children:e.jsx(re,{href:"#",isActive:w===o,onClick:_=>{_.preventDefault(),c||j(w)},className:v("cursor-pointer",c&&"pointer-events-none opacity-50"),children:w})},w))})(),e.jsx(se,{children:e.jsx(Qe,{href:"#",onClick:i=>{i.preventDefault(),o<m&&!c&&j(o+1)},className:v("cursor-pointer",(o>=m||c)&&"pointer-events-none opacity-50")})})]})})})]}):e.jsxs("section",{className:"rounded-lg border border-slate-200 bg-white shadow-sm p-6 text-center",children:[e.jsx("div",{className:"text-slate-400 mb-3",children:e.jsx("svg",{className:"w-10 h-10 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})})}),e.jsx("p",{className:"text-sm text-slate-700 font-medium mb-1",children:t("vehicle.quotes_section.unavailable_title","Price calculation unavailable")}),e.jsx("p",{className:"text-xs text-slate-500 max-w-xs mx-auto mb-4",children:p||t("vehicle.quotes_section.unavailable_description","Shipping quotes cannot be calculated for this location.")}),e.jsx(D,{onClick:n,variant:"outline",size:"sm",className:"text-xs",children:t("vehicle.quotes_section.request_custom_quote","Request Custom Quote")})]})},Te=a.memo(({vehicleId:s,auction:l,usacity:r,vehiclecategory:c,priceAvailable:h,priceUnavailableMessage:p,onOpenBreakdown:u,onOpenLeadModal:n,limit:o=5})=>{const{quotes:m,total:j,totalPages:t,currentPage:d,isLoading:x,error:C,setPage:i,priceStats:y}=Ns({vehicleId:s,auction:l,usacity:r,limit:o,vehiclecategory:c});return e.jsx(ys,{filteredQuotes:m,priceStats:y,error:C,isLoading:x,priceAvailable:h,priceUnavailableMessage:p,onOpenBreakdown:u,onOpenLeadModal:n,total:j,currentPage:d,totalPages:t,onPageChange:i})});Te.displayName="VehicleQuotesContainer";const _s=({isOpen:s,onClose:l,count:r})=>{const{t:c}=z();return a.useEffect(()=>{if(s){const p=Date.now()+3e3,u={startVelocity:30,spread:360,ticks:60,zIndex:100},n=(m,j)=>Math.random()*(j-m)+m,o=setInterval(function(){const m=p-Date.now();if(m<=0)return clearInterval(o);const j=50*(m/3e3);Me({...u,particleCount:j,origin:{x:n(.1,.3),y:Math.random()-.2}}),Me({...u,particleCount:j,origin:{x:n(.7,.9),y:Math.random()-.2}})},250);return()=>clearInterval(o)}},[s]),e.jsx(G,{open:s,onOpenChange:l,children:e.jsxs(X,{className:"sm:max-w-[380px]",children:[e.jsx("div",{className:"flex justify-center -mt-2 mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-20 w-20 rounded-full bg-gradient-to-br from-emerald-400 to-emerald-600 flex items-center justify-center shadow-lg shadow-emerald-500/30 animate-bounce",children:e.jsx(b,{icon:"mdi:check-bold",className:"h-10 w-10 text-white"})}),e.jsx("div",{className:"absolute inset-0 rounded-full border-4 border-emerald-200 animate-ping opacity-30"})]})}),e.jsxs(K,{children:[e.jsx(J,{className:"text-2xl",children:c("vehicle.success_modal.title")}),e.jsx(Z,{children:c("vehicle.success_modal.description",{count:r})})]}),e.jsx("div",{className:"bg-slate-50 rounded-xl p-4 my-2",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center shrink-0",children:e.jsx(b,{icon:"mdi:headset",className:"h-4 w-4 text-blue-600"})}),e.jsx("p",{className:"text-sm text-slate-600 leading-relaxed",children:c("vehicle.success_modal.manager_contact")})]})}),e.jsx(ge,{className:"sm:justify-center pt-2",children:e.jsxs(D,{onClick:l,className:"w-full h-12 rounded-xl font-bold text-base bg-gradient-to-r from-emerald-500 to-emerald-600 hover:from-emerald-600 hover:to-emerald-700 shadow-lg shadow-emerald-500/25",children:[e.jsx(b,{icon:"mdi:check-circle",className:"h-5 w-5 mr-2"}),c("common.great_thanks")]})})]})})},ks=({quote:s,isOpen:l,onClose:r})=>{const{t:c}=z();if(!s)return null;const h=n=>n?`$${Number(n).toLocaleString()}`:"—",p=s.breakdown?.transportation_total??s.total_price;s.breakdown?.currency;const u=[{icon:"mdi:truck-delivery",label:c("vehicle.shipping_total"),value:p,color:"text-blue-600",bgColor:"bg-blue-50",isMain:!0},...s.breakdown?.customs_fee!=null?[{icon:"mdi:file-document-check",label:c("vehicle.customs_clearance"),value:s.breakdown.customs_fee,color:"text-purple-600",bgColor:"bg-purple-50"}]:[],...s.breakdown?.broker_fee!=null?[{icon:"mdi:handshake",label:c("vehicle.broker_fees"),value:s.breakdown.broker_fee,color:"text-emerald-600",bgColor:"bg-emerald-50"}]:[],...s.breakdown?.insurance_fee!=null?[{icon:"mdi:shield-check",label:c("vehicle.insurance_optional"),value:s.breakdown.insurance_fee,color:"text-slate-500",bgColor:"bg-slate-50",isOptional:!0}]:[]];return e.jsx(G,{open:l,onOpenChange:r,children:e.jsxs(X,{className:"sm:max-w-[420px]",children:[e.jsx("div",{className:"flex justify-center -mt-2 mb-2",children:e.jsx("div",{className:"h-14 w-14 rounded-2xl bg-gradient-to-br from-blue-500/10 to-primary/10 flex items-center justify-center shadow-sm",children:e.jsx(b,{icon:"mdi:calculator-variant",className:"h-7 w-7 text-primary"})})}),e.jsxs(K,{children:[e.jsx(J,{children:c("vehicle.price_breakdown")}),e.jsxs(Z,{children:[c("vehicle.detailed_quote")," ",e.jsx("span",{className:"font-semibold text-slate-700",children:s.company_name})]})]}),e.jsx("div",{className:"space-y-3 my-2",children:u.map((n,o)=>e.jsxs("div",{className:v("flex items-center justify-between p-3 rounded-xl transition-all",n.isOptional?"bg-slate-50/50":"bg-slate-50 hover:bg-slate-100/80"),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:v("h-9 w-9 rounded-lg flex items-center justify-center",n.bgColor),children:e.jsx(b,{icon:n.icon,className:v("h-4.5 w-4.5",n.color)})}),e.jsxs("span",{className:v("text-sm font-medium",n.isOptional?"text-slate-400":"text-slate-700"),children:[n.label,n.isOptional&&e.jsx("span",{className:"text-[10px] ml-1 text-slate-400",children:"(opt)"})]})]}),e.jsx("span",{className:v("font-bold tabular-nums",n.isOptional?"text-slate-400 text-sm":"text-slate-900"),children:h(n.value)})]},o))}),e.jsx("div",{className:"bg-gradient-to-r from-primary/10 via-primary/5 to-emerald-500/10 p-4 rounded-xl border border-primary/10",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{icon:"mdi:sigma",className:"h-5 w-5 text-primary"}),e.jsx("span",{className:"font-bold text-primary uppercase text-xs tracking-wider",children:c("vehicle.total_estimated")})]}),e.jsx("span",{className:"font-black text-2xl text-slate-900",children:h(s.total_price)})]})}),e.jsxs("p",{className:"text-[11px] text-slate-400 text-center flex items-center justify-center gap-1.5 mt-2",children:[e.jsx(b,{icon:"mdi:information-outline",className:"h-3.5 w-3.5"}),c("vehicle.price_note")]})]})})},Ss=({photos:s})=>{const[l,r]=a.useState(0),[c,h]=a.useState(!1);if(!s.length)return e.jsx("div",{className:"aspect-[4/3] w-full bg-slate-200 flex items-center justify-center text-slate-400",children:"No Photos"});const p=()=>r(n=>n>0?n-1:s.length-1),u=()=>r(n=>n<s.length-1?n+1:0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative bg-card rounded-2xl overflow-hidden border border-border/70 shadow-sm",children:[e.jsx("img",{src:s[l]?.url,alt:"Vehicle",className:"w-full aspect-[4/3] object-cover cursor-pointer",onClick:()=>h(!0)}),e.jsx("button",{onClick:p,className:"absolute left-3 top-1/2 -translate-y-1/2 w-9 h-9 bg-background/90 rounded-full flex items-center justify-center hover:bg-background shadow-sm border border-border/60",children:e.jsx(b,{icon:"mdi:chevron-left",className:"w-5 h-5 text-foreground/80"})}),e.jsx("button",{onClick:u,className:"absolute right-3 top-1/2 -translate-y-1/2 w-9 h-9 bg-background/90 rounded-full flex items-center justify-center hover:bg-background shadow-sm border border-border/60",children:e.jsx(b,{icon:"mdi:chevron-right",className:"w-5 h-5 text-foreground/80"})}),e.jsxs("div",{className:"absolute bottom-3 right-3 bg-background text-foreground text-[11px] px-2 py-1 rounded-full flex items-center gap-1.5 border border-border/60 shadow-sm",children:[e.jsx(b,{icon:"mdi:camera",className:"w-3.5 h-3.5 text-muted-foreground"}),e.jsxs("span",{className:"tabular-nums",children:[l+1,"/",s.length]})]})]}),e.jsx("div",{className:"copart-gallery-thumbs grid grid-cols-3 sm:grid-cols-5 md:grid-cols-7 gap-1.5 min-w-0",children:s.slice(0,14).map((n,o)=>e.jsx("button",{onClick:()=>r(o),className:v("relative aspect-[4/3] overflow-hidden rounded-lg border transition-all bg-muted",l===o?"border-primary ring-1 ring-primary/70":"border-transparent opacity-80 hover:opacity-100"),children:e.jsx("img",{src:n.url,alt:"",className:"h-full w-full object-cover"})},o))})]}),c&&e.jsxs("div",{className:"fixed inset-0 z-50 bg-black/80 flex items-center justify-center p-4",children:[e.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 z-50 w-10 h-10 bg-white/90 hover:bg-white rounded-full flex items-center justify-center shadow-lg transition-colors","aria-label":"Close",children:e.jsx(b,{icon:"mdi:close",className:"w-5 h-5 text-gray-900"})}),e.jsx("img",{src:s[l]?.url,alt:"Vehicle",className:"max-w-full max-h-full object-contain"}),e.jsx("button",{onClick:p,className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/90 hover:bg-white rounded-full flex items-center justify-center shadow-lg transition-colors","aria-label":"Previous image",children:e.jsx(b,{icon:"mdi:chevron-left",className:"w-6 h-6 text-gray-900"})}),e.jsx("button",{onClick:u,className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 bg-white/90 hover:bg-white rounded-full flex items-center justify-center shadow-lg transition-colors","aria-label":"Next image",children:e.jsx(b,{icon:"mdi:chevron-right",className:"w-6 h-6 text-gray-900"})}),e.jsxs("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 bg-white/90 text-gray-900 text-sm px-4 py-2 rounded-full flex items-center gap-2 shadow-lg",children:[e.jsx(b,{icon:"mdi:camera",className:"w-4 h-4"}),e.jsxs("span",{className:"tabular-nums font-medium",children:[l+1," / ",s.length]})]})]})]})},Cs=({baseVehicleId:s})=>{const{t:l}=z(),r=je(),{isAuthenticated:c}=Re(),{isWatched:h,toggleWatch:p}=Oe(),[u,n]=a.useState([]),[o,m]=a.useState(!1),[j,t]=a.useState(null),d=De(),x=a.useRef(null),[C,i]=a.useState(!1),[y,w]=a.useState(0),[F,_]=a.useState(0);a.useEffect(()=>{let f=!0;return(async()=>{m(!0),t(null);try{const P=await os(s,{limit:20});if(!f)return;const E=Array.isArray(P.items)?P.items:[];n(E.slice(0,10))}catch(P){if(!f)return;const E=P instanceof Error?P.message:"Failed to load similar vehicles";t(E)}finally{f&&m(!1)}})(),()=>{f=!1}},[s]);const O=a.useCallback(f=>{if(!c){r("/login");return}p(f)},[c,r,p]),W=f=>{x.current&&(i(!0),w(f.pageX-x.current.offsetLeft),_(x.current.scrollLeft))},q=()=>{i(!1)},Q=()=>{i(!1)},R=f=>{if(!C||!x.current)return;f.preventDefault();const P=(f.pageX-x.current.offsetLeft-y)*2;x.current.scrollLeft=F-P};return a.useEffect(()=>{const f=()=>{i(!1)};if(C)return window.addEventListener("mouseup",f),()=>window.removeEventListener("mouseup",f)},[C]),o?e.jsxs("section",{className:"space-y-4 pt-8 border-t",children:[e.jsx("h2",{className:"text-xl font-bold",children:l("vehicle.similar.title")}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsx(ne,{className:"h-64 rounded-xl"}),e.jsx(ne,{className:"h-64 rounded-xl hidden sm:block"}),e.jsx(ne,{className:"h-64 rounded-xl hidden sm:block"})]})]}):j||!u.length?null:e.jsxs(Ie.section,{className:"similar-vehicles-section space-y-4 pt-8 border-t overflow-hidden",initial:d?!1:{opacity:0,y:16},whileInView:d?{}:{opacity:1,y:0},viewport:{once:!0,amount:.2},transition:{duration:.25,ease:"easeOut"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:l("vehicle.similar.title")}),e.jsxs("div",{className:"hidden lg:flex items-center gap-2",children:[e.jsx(D,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-full border-slate-200 hover:bg-slate-100 dark:border-slate-800 dark:hover:bg-slate-800",onClick:()=>{x.current&&x.current.scrollBy({left:-400,behavior:"smooth"})},"aria-label":"Scroll left",children:e.jsx(b,{icon:"mdi:chevron-left",className:"h-5 w-5"})}),e.jsx(D,{variant:"outline",size:"icon",className:"h-8 w-8 rounded-full border-slate-200 hover:bg-slate-100 dark:border-slate-800 dark:hover:bg-slate-800",onClick:()=>{x.current&&x.current.scrollBy({left:400,behavior:"smooth"})},"aria-label":"Scroll right",children:e.jsx(b,{icon:"mdi:chevron-right",className:"h-5 w-5"})})]})]}),e.jsx("div",{ref:x,className:v("flex overflow-x-auto gap-4 pb-4 scrollbar-hide select-none",C?"lg:cursor-auto cursor-grabbing snap-none":"lg:cursor-auto cursor-grab snap-x snap-mandatory"),onMouseDown:f=>{window.innerWidth>=1024||W(f)},onMouseLeave:f=>{window.innerWidth>=1024||q()},onMouseUp:f=>{window.innerWidth>=1024||Q()},onMouseMove:f=>{window.innerWidth>=1024||R(f)},children:u.map(f=>e.jsx("div",{className:"flex-shrink-0 w-[240px] min-[460px]:w-[280px] min-[500px]:w-[340px] sm:w-[380px] md:w-[420px] lg:w-[400px] snap-start",children:e.jsx(gs,{item:f,priority:!1,onViewDetails:()=>r({pathname:`/vehicle/${f.id}`}),onToggleWatch:()=>O(f.id),isWatched:h(f.id)})},f.id))})]})},qs=()=>{const{t:s,i18n:l}=z(),{id:r}=is(),c=je(),h=De(),{isAuthenticated:p,userRole:u}=Re(),{isWatched:n,toggleWatch:o,isLoading:m}=Oe(),j=a.useRef(null);if(j.current===null){const g=new URLSearchParams(window.location.search),S=g.get("limit"),M=g.get("rating"),V=S?parseInt(S,10):100,$=M?parseFloat(M):null;j.current={limit:V>0&&V<=100?V:100,rating:$&&$>0?$:null}}const{vehicle:t,photos:d,quotes:x,isLoading:C,priceAvailable:i,priceUnavailableMessage:y}=fs(r?Number(r):null,{initialLimit:j.current.limit,initialMinRating:j.current.rating}),[w,F]=a.useState(!1),[_,O]=a.useState([]),[W,q]=a.useState(!1),[Q,R]=a.useState(!1),[f,U]=a.useState(null),[P,E]=a.useState(!1),[we,Ne]=a.useState(!1),[te,H]=a.useState(!1),[ce,oe]=a.useState(!1),[de,me]=a.useState(""),[k,A]=a.useState(""),[N,I]=a.useState("whatsapp"),[T,L]=a.useState(!1),[ae,ee]=a.useState(""),[ue,Be]=a.useState(!1),[ye,_e]=a.useState(!0),[$e,ke]=a.useState(!1),[Se,ze]=a.useState(!1),[We,xe]=a.useState(!1),Y=a.useMemo(()=>[...t?.bids||[]].sort((S,M)=>{const V=S?.bid_time?new Date(S.bid_time).getTime():0,$=M?.bid_time?new Date(M.bid_time).getTime():0;return!V&&!$?0:V?$?$-V:-1:1}),[t]),le=Y[0]||null,He=le?.bid??0,Ce=a.useMemo(()=>le?.bid_time?fe(le.bid_time,l.language):null,[l.language,le?.bid_time]);a.useEffect(()=>{const g=t?.engine_view;if(!g||Se)return;const S=setTimeout(()=>{const M=document.createElement("video");M.preload="auto",M.src=g,M.load(),ze(!0)},2e3);return()=>clearTimeout(S)},[t,Se]),a.useEffect(()=>{let g=window.scrollY||0;const S=()=>{const M=window.scrollY||0,V=M-g;Math.abs(V)<10||(M>100&&V>0?_e(!1):V<0&&_e(!0),g=M)};return window.addEventListener("scroll",S,{passive:!0}),()=>window.removeEventListener("scroll",S)},[]);const B=a.useMemo(()=>x.length?[...x].sort((g,S)=>(Number(g.total_price)||0)-(Number(S.total_price)||0))[0]:null,[x]),Ye=a.useCallback(g=>{U(g)},[]),Ge=a.useCallback(()=>{H(!0)},[]),Xe=g=>{g.preventDefault(),ue&&(q(!0),R(!1),alert("Feature Unlocked! You can now select up to 5 companies."))},Ke=async g=>{if(g.preventDefault(),!(_.length===0||!r)){L(!0);try{alert("This feature has been removed. Please contact companies directly."),H(!1),w||O([])}catch{alert("Failed to send request. Please try again.")}finally{L(!1)}}},he=Number(t?.buy_it_now_price||t?.final_bid||0),Je=B?Number(B.breakdown?.shipping_total)||1200:0,Ze=B?Number(B.breakdown?.customs_fee)||500:0,es=B&&Number(B.breakdown?.broker_fee)||300,ss=B?Number(B.total_price):he+Je+Ze+es,[pe,Ls]=a.useState(null),ts=Number.isFinite(pe)&&pe>=0?pe:he,as=Math.max(0,ss+(ts-he));return C?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx(ne,{className:"h-96 w-full max-w-4xl"})}):t?e.jsxs("div",{className:"flex-1 flex flex-col bg-slate-50",children:[e.jsxs("div",{className:"vehicle-details-container w-full px-4 lg:px-8 lg:max-w-[1440px] mx-auto py-8 lg:py-10",children:[e.jsx(bs,{year:t.year,make:t.make,model:t.model}),e.jsxs(Ie.div,{className:"vehicle-main-grid grid md:grid-cols-2 lg:grid-cols-12 gap-5 xl:gap-6 items-start min-h-[60vh] lg:min_h-[70vh] pb-6 min-w-0",initial:h?!1:{opacity:0,y:8},animate:h?{}:{opacity:1,y:0},transition:{duration:.22,ease:"easeOut"},children:[e.jsxs("div",{className:"md:col-span-1 lg:col-span-4 space-y-4 w-full min-w-0",children:[e.jsx(Ss,{photos:d}),(t.iaai_360_view||t.copart_360_interior_view)&&e.jsxs("div",{className:"flex gap-2",children:[t.iaai_360_view&&e.jsxs("a",{href:t.iaai_360_view,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors shadow-sm",children:[e.jsx(b,{icon:"mdi:rotate-3d-variant",className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-[12px] font-medium text-slate-700",children:"360° Exterior"})]}),t.copart_360_interior_view&&e.jsxs("a",{href:t.copart_360_interior_view,target:"_blank",rel:"noopener noreferrer",className:"flex-1 flex items-center justify-center gap-2 px-4 py-2.5 bg-white border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors shadow-sm",children:[e.jsx(b,{icon:"mdi:car-seat",className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-[12px] font-medium text-slate-700",children:"360° Interior"})]})]})]}),e.jsx("div",{className:"md:col-span-1 lg:col-span-4 space-y-5 w-full min-w-0",children:e.jsxs("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm",children:[e.jsx("div",{className:"flex items-center justify-between px-4 py-2 border-b border-slate-100",children:e.jsx("h2",{className:"text-[13px] font-semibold text-slate-900",children:s("vehicle.details.title","Vehicle details")})}),e.jsxs("div",{className:"divide-y divide-slate-100",children:[t.source_lot_id&&e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.lot_number","Lot number:")}),e.jsx("span",{className:"text-[11px] font-medium text-slate-900 uppercase break-all",children:t.source_lot_id})]}),t.vin&&e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.vin","VIN:")}),e.jsx("span",{className:"text-[11px] font-medium text-slate-900 uppercase break-all",children:t.vin})]}),t.document&&e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.title_code","Title code:")}),e.jsx("span",{className:"text-[11px] font-medium text-slate-900 uppercase break-words",children:t.document})]}),e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.odometer","Odometer:")}),e.jsxs("span",{className:"text-[11px] font-medium text-slate-900 uppercase truncate",children:[(t.mileage||0).toLocaleString()," MI"]})]}),t.damage_main_damages&&e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.primary_damage","Primary damage:")}),e.jsx("span",{className:"text-[11px] font-medium text-slate-900 uppercase break-words",children:s("vehicle.damage_types."+t.damage_main_damages.toLowerCase().replace(/[\/\s]+/g,"_"),t.damage_main_damages)})]}),t.retail_value&&e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.estimated_retail_value","Estimated retail value:")}),e.jsxs("span",{className:"text-[11px] font-medium text-slate-900",children:["$",Number(t.retail_value).toLocaleString()]})]}),e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.cylinders","Cylinders:")}),e.jsx("span",{className:"text-[11px] font-medium text-slate-900 uppercase",children:t.cylinders||0})]}),t.color&&e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.color","Color:")}),e.jsx("span",{className:"text-[11px] font-medium text-slate-900 uppercase break-words",children:s("vehicle.colors."+t.color.toLowerCase(),t.color)})]}),(t.engine_volume||t.cylinders)&&e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.engine_type","Engine type:")}),e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"text-[11px] font-medium text-slate-900 uppercase truncate",children:t.engine_volume&&t.cylinders?`${t.engine_volume}L ${t.cylinders}`:t.engine_volume?`${t.engine_volume}L`:t.cylinders}),t.engine_view&&e.jsx("button",{onClick:()=>ke(!0),className:"text-[11px] text-primary hover:underline shrink-0",children:s("vehicle.details.view_engine","View engine")})]})]}),t.transmission&&e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.transmission","Transmission:")}),e.jsx("span",{className:"text-[11px] font-medium text-slate-900 uppercase break-words",children:s(`auction.filters.${t.transmission.toLowerCase().trim()}`,t.transmission)})]}),t.drive&&e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.drive","Drive:")}),e.jsx("span",{className:"text-[11px] font-medium text-slate-900 uppercase",children:s("vehicle.drive_types."+t.drive.toLowerCase(),t.drive)})]}),e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.vehicle_type","Vehicle type:")}),e.jsx("span",{className:"text-[11px] font-medium text-slate-900 uppercase",children:s("vehicle.details.vehicle_type_value","HARDCODED")})]}),t.engine_fuel&&e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.fuel","Fuel:")}),e.jsx("span",{className:"text-[11px] font-medium text-slate-900 uppercase",children:s(`auction.filters.${t.engine_fuel.toLowerCase().trim()}`,t.engine_fuel)})]}),e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.keys","Keys:")}),e.jsx("span",{className:"text-[11px] font-medium text-slate-900 uppercase",children:t.has_keys?s("vehicle.details.yes","YES"):s("vehicle.details.no","NO")})]}),t.run_and_drive&&e.jsxs("div",{className:"grid grid-cols-[120px_1fr] md:grid-cols-[130px_1fr] px-4 py-1.5 min-w-0",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.details.highlights","Highlights:")}),e.jsx("span",{className:"text-[11px] font-medium text-slate-900 truncate",children:s("vehicle.details.run_and_drive","Run and Drive")})]})]})]})}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-4 space-y-4 w-full min-w-0",children:[e.jsx("div",{className:"bg-white rounded-lg border border-slate-200 shadow-sm p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[t?.yard_name&&e.jsx("span",{className:"text-[12px] font-semibold text-primary uppercase pb-[5px]",children:t.yard_name}),e.jsxs(D,{variant:"default",size:"sm",disabled:m,onClick:()=>{if(!p){c("/login");return}o(t.id)},className:v("flex items-center gap-2 text-[12px] font-semibold border shadow-sm min-w-[100px] justify-center transition-all",n(t.id)?"bg-green-600 hover:bg-green-700 text-white border-green-600":"bg-white hover:bg-slate-50 text-slate-700 border-slate-300"),children:[e.jsx(b,{icon:n(t.id)?"mdi:heart":"mdi:heart-outline",className:v("w-4 h-4 transition-transform",n(t.id)&&"scale-110")}),e.jsx("span",{className:"truncate",children:n(t.id)?s("vehicle.watchlist.saved","Saved"):s("vehicle.watchlist.save","Save")})]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"text-[11px] text-slate-500",children:s("vehicle.bids.last_bid","Last bid:")}),e.jsxs("span",{className:"text-[13px] font-semibold text-slate-900",children:["$",He.toLocaleString()]})]}),Ce&&e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsx("span",{className:"text-[11px] font-medium text-slate-700",children:Ce})}),Y.length>0&&e.jsx("button",{onClick:()=>xe(!0),className:"text-[11px] text-primary hover:underline mt-1",children:s("vehicle.bids.view_all","View all bids ({{count}})",{count:Y.length})})]})]})}),e.jsx(Te,{vehicleId:t?.id||0,auction:t?.source||"",usacity:t?.yard_name||"",vehiclecategory:t?.vehicle_type==="c"?"Bike":"Sedan",priceAvailable:i,priceUnavailableMessage:y,onOpenBreakdown:Ye,onOpenLeadModal:Ge})]})]}),e.jsx("div",{className:"mt-8",children:e.jsx(Cs,{baseVehicleId:t.id})})]}),e.jsx(_s,{isOpen:ce,onClose:()=>oe(!1),count:_.length||1}),t.engine_view&&e.jsx(G,{open:$e,onOpenChange:ke,children:e.jsxs(X,{className:"max-w-3xl p-0 overflow-hidden",children:[e.jsxs(K,{className:"p-4 pb-0",children:[e.jsx(J,{children:"Engine View"}),e.jsxs(Z,{children:[t.year," ",t.make," ",t.model]})]}),e.jsx("div",{className:"p-4",children:e.jsx("video",{src:t.engine_view,controls:!0,autoPlay:!0,preload:"auto",playsInline:!0,className:"w-full rounded-lg bg-black",children:"Your browser does not support the video tag."})})]})}),e.jsx(G,{open:We,onOpenChange:xe,children:e.jsxs(X,{className:"max-w-lg",children:[e.jsxs(K,{children:[e.jsx(J,{children:s("vehicle.bid_history.title","Bid History")}),e.jsxs(Z,{children:[t.year," ",t.make," ",t.model," • ",s("vehicle.bid_history.bids_count","{{count}} bid",{count:Y.length})]})]}),e.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:Y.length===0?e.jsx("div",{className:"text-center py-8 text-slate-500 text-sm",children:s("vehicle.bid_history.no_bids","No bids recorded for this vehicle")}):e.jsx("div",{className:"divide-y divide-slate-100",children:Y.map((g,S)=>e.jsxs("div",{className:"flex items-center justify-between py-3 px-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:v("w-8 h-8 rounded-full flex items-center justify-center text-[11px] font-bold",S===0?"bg-green-100 text-green-700":"bg-slate-100 text-slate-600"),children:`#${S+1}`}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-[13px] font-semibold text-slate-900",children:["$",(g.bid??0).toLocaleString()]}),S===0&&e.jsx("span",{className:"text-[10px] text-green-600 font-medium uppercase",children:s("vehicle.bid_history.latest_bid","Latest Bid")})]})]}),e.jsx("div",{className:"text-right",children:g.bid_time?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-[11px] text-slate-700",children:fe(g.bid_time,l.language,{month:"short",day:"numeric",year:"numeric"})}),e.jsx("div",{className:"text-[10px] text-slate-500",children:fe(g.bid_time,l.language,{hour:"2-digit",minute:"2-digit"})})]}):e.jsx("span",{className:"text-[11px] text-slate-400",children:s("vehicle.bid_history.no_date","No date")})})]},S))})}),e.jsx(ge,{children:e.jsx(D,{variant:"outline",onClick:()=>xe(!1),children:s("common.close","Close")})})]})}),e.jsxs("div",{className:v("fixed bottom-0 left-0 right-0 bg-background/80 backdrop-blur-lg border-t p-4 md:hidden z-50 flex items-center justify-between shadow-[0_-4px_10px_rgba(0,0,0,0.05)] safe-area-bottom transition-transform duration-300",ye?"translate-y-0":"translate-y-full",!ye&&"hidden"),children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-wider",children:s("vehicle.mobile_cta.total_est")}),e.jsxs("p",{className:"text-xl font-extrabold text-primary leading-none",children:["$",as.toLocaleString()]})]}),e.jsx(D,{onClick:()=>{_.length>0?H(!0):document.getElementById("quotes-table")?.scrollIntoView({behavior:"smooth"})},size:"lg",className:"shadow-lg font-bold px-6",children:_.length>0?s("vehicle.mobile_cta.request",{count:_.length}):s("vehicle.mobile_cta.select")})]}),e.jsx(G,{open:te,onOpenChange:H,children:e.jsxs(X,{className:"sm:max-w-[420px]",children:[e.jsx("div",{className:"flex justify-center -mt-2 mb-2",children:e.jsx("div",{className:"h-14 w-14 rounded-2xl bg-gradient-to-br from-primary/10 to-emerald-500/10 flex items-center justify-center shadow-sm",children:e.jsx(b,{icon:"mdi:car-connected",className:"h-7 w-7 text-primary"})})}),e.jsxs(K,{children:[e.jsx(J,{className:"text-center",children:s("vehicle.lead_modal.title")}),e.jsx(Z,{className:"text-center",children:e.jsx("span",{dangerouslySetInnerHTML:{__html:s("vehicle.lead_modal.description",{count:_.length})}})})]}),e.jsxs("form",{onSubmit:Ke,className:"space-y-5",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ie,{htmlFor:"name",className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:s("vehicle.lead_modal.your_name")}),e.jsx(Le,{id:"name",placeholder:"John Doe",value:de,onChange:g=>me(g.target.value),required:!0,className:"h-12 rounded-xl border-slate-200 bg-slate-50/50 px-4 text-base placeholder:text-slate-400 focus:bg-white focus:border-primary focus:ring-2 focus:ring-primary/10 transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ie,{htmlFor:"phone",className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:s("vehicle.lead_modal.phone")}),e.jsx(Le,{id:"phone",placeholder:"+995 555 00 00 00",value:k,onChange:g=>A(g.target.value),required:!0,className:"h-12 rounded-xl border-slate-200 bg-slate-50/50 px-4 text-base placeholder:text-slate-400 focus:bg-white focus:border-primary focus:ring-2 focus:ring-primary/10 transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ie,{className:"text-xs font-semibold uppercase tracking-wide text-slate-500",children:s("vehicle.lead_modal.contact_method")}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>I("whatsapp"),className:v("flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all duration-200",N==="whatsapp"?"border-green-500 bg-green-50 shadow-sm shadow-green-500/20":"border-slate-200 bg-white hover:border-slate-300 hover:bg-slate-50"),children:[e.jsx("div",{className:v("h-10 w-10 rounded-full flex items-center justify-center transition-all",N==="whatsapp"?"bg-green-500 text-white":"bg-slate-100 text-slate-500"),children:e.jsx(b,{icon:"mdi:whatsapp",className:"h-5 w-5"})}),e.jsx("span",{className:v("text-sm font-semibold transition-colors",N==="whatsapp"?"text-green-700":"text-slate-600"),children:s("vehicle.lead_modal.whatsapp")})]}),e.jsxs("button",{type:"button",onClick:()=>I("phone"),className:v("flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all duration-200",N==="phone"?"border-blue-500 bg-blue-50 shadow-sm shadow-blue-500/20":"border-slate-200 bg-white hover:border-slate-300 hover:bg-slate-50"),children:[e.jsx("div",{className:v("h-10 w-10 rounded-full flex items-center justify-center transition-all",N==="phone"?"bg-blue-500 text-white":"bg-slate-100 text-slate-500"),children:e.jsx(b,{icon:"mdi:phone",className:"h-5 w-5"})}),e.jsx("span",{className:v("text-sm font-semibold transition-colors",N==="phone"?"text-blue-700":"text-slate-600"),children:s("vehicle.lead_modal.phone_call")})]})]})]}),e.jsx(D,{type:"submit",className:"w-full h-12 rounded-xl font-bold text-base shadow-lg shadow-primary/25 hover:shadow-xl hover:shadow-primary/30 transition-all",disabled:T,children:T?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(b,{icon:"mdi:loading",className:"h-5 w-5 animate-spin"}),s("vehicle.lead_modal.sending")]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(b,{icon:"mdi:send",className:"h-5 w-5"}),s("vehicle.lead_modal.send_request",{count:_.length})]})}),e.jsxs("p",{className:"text-center text-[11px] text-slate-400 flex items-center justify-center gap-1.5",children:[e.jsx(b,{icon:"mdi:shield-check",className:"h-3.5 w-3.5 text-emerald-500"}),s("vehicle.lead_modal.secure_note",{defaultValue:"Your data is secure and will only be shared with selected companies"})]})]})]})}),e.jsx(ks,{quote:f,isOpen:!!f,onClose:()=>U(null)}),e.jsx(G,{open:Q,onOpenChange:R,children:e.jsxs(X,{children:[e.jsxs(K,{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(b,{icon:"mdi:lock-open-variant",className:"text-primary"}),s("vehicle.unlock_modal.title")]}),e.jsx(Z,{children:s("vehicle.unlock_modal.description")})]}),e.jsxs("form",{onSubmit:Xe,className:"space-y-4 py-2",children:[e.jsxs("div",{className:"bg-muted/30 p-4 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:s("vehicle.unlock_modal.like_project")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ns,{id:"like",checked:ue,onCheckedChange:g=>Be(g===!0)}),e.jsx(ie,{htmlFor:"like",className:"text-xs",children:s("vehicle.unlock_modal.i_liked")})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-sm font-medium",children:s("vehicle.unlock_modal.write_review")}),e.jsx(rs,{placeholder:s("vehicle.unlock_modal.review_placeholder"),value:ae,onChange:g=>ee(g.target.value),className:"h-20 text-xs"})]})]}),e.jsx(ge,{children:e.jsx(D,{type:"submit",disabled:!ue,className:"w-full",children:s("vehicle.unlock_modal.unlock_btn")})})]})]})})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsx("div",{className:"container p-8 text-center",children:s("vehicle.not_found")})})};export{qs as default};
