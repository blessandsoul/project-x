import{r as c,j as e,F as ce,an as Ne,H as te,J as Tn,ao as de,ap as He,aq as Ke,M as B,P as Rn,c as G,ar as In,K as X,as as We,at as An,au as kn,a2 as M,av as $n,a as Pe,b as ue,C as T,l as be,n as ve,o as je,p as ye,q as J,I as V,B as W,D as O,z as Ue,ag as Oe,v as Dn,S as xe}from"./index-CSgTRbNC.js";import{u as Vn,o as ie,_ as _e,h as ae,s as $,a as Ee,F as Te,d as j,b as y,c as _,e as S,g as C,l as Fn,f as Mn,i as Ln,n as On}from"./form-BqUZgaUq.js";import{C as Ye}from"./checkbox-yKpFDs6Y.js";import{C as Re,a as Ie,b as Ae,d as ke,c as $e,e as Bn}from"./card-Bp4aBwF4.js";import{c as Be}from"./confetti.module-C_1cc0iU.js";import{n as H}from"./coerce-CbSue80Z.js";import{a as ee,b as ne,c as re}from"./tooltip-C_hdCo7Y.js";import{B as Gn}from"./badge-zj69FNPh.js";import{T as zn}from"./textarea-JCBEmqZy.js";import{f as Hn}from"./services-CAbWOvOE.js";import{b as Kn,e as Wn,g as Un,h as Yn,i as Zn}from"./companiesApi-CzKtJjX4.js";import"./label-DarQQ0iR.js";function qn(n,r=[]){let t=[];function s(l,a){const i=c.createContext(a),d=t.length;t=[...t,a];const p=u=>{const{scope:m,children:h,...b}=u,N=m?.[n]?.[d]||i,P=c.useMemo(()=>b,Object.values(b));return e.jsx(N.Provider,{value:P,children:h})};p.displayName=l+"Provider";function x(u,m){const h=m?.[n]?.[d]||i,b=c.useContext(h);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${u}\` must be used within \`${l}\``)}return[p,x]}const o=()=>{const l=t.map(a=>c.createContext(a));return function(i){const d=i?.[n]||l;return c.useMemo(()=>({[`__scope${n}`]:{...i,[n]:d}}),[i,d])}};return o.scopeName=n,[s,Jn(o,...r)]}function Jn(...n){const r=n[0];if(n.length===1)return r;const t=()=>{const s=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const a=s.reduce((i,{useScope:d,scopeName:p})=>{const u=d(l)[`__scope${p}`];return{...i,...u}},{});return c.useMemo(()=>({[`__scope${r.scopeName}`]:a}),[a])}};return t.scopeName=r.scopeName,t}function Xn(n){const r=Qn(n),t=c.forwardRef((s,o)=>{const{children:l,...a}=s,i=c.Children.toArray(l),d=i.find(nr);if(d){const p=d.props.children,x=i.map(u=>u===d?c.Children.count(p)>1?c.Children.only(null):c.isValidElement(p)?p.props.children:null:u);return e.jsx(r,{...a,ref:o,children:c.isValidElement(p)?c.cloneElement(p,void 0,x):null})}return e.jsx(r,{...a,ref:o,children:l})});return t.displayName=`${n}.Slot`,t}function Qn(n){const r=c.forwardRef((t,s)=>{const{children:o,...l}=t;if(c.isValidElement(o)){const a=tr(o),i=rr(l,o.props);return o.type!==c.Fragment&&(i.ref=s?ce(s,a):a),c.cloneElement(o,i)}return c.Children.count(o)>1?c.Children.only(null):null});return r.displayName=`${n}.SlotClone`,r}var er=Symbol("radix.slottable");function nr(n){return c.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===er}function rr(n,r){const t={...r};for(const s in r){const o=n[s],l=r[s];/^on[A-Z]/.test(s)?o&&l?t[s]=(...i)=>{const d=l(...i);return o(...i),d}:o&&(t[s]=o):s==="style"?t[s]={...o,...l}:s==="className"&&(t[s]=[o,l].filter(Boolean).join(" "))}return{...n,...t}}function tr(n){let r=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?n.ref:(r=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var sr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],me=sr.reduce((n,r)=>{const t=Xn(`Primitive.${r}`),s=c.forwardRef((o,l)=>{const{asChild:a,...i}=o,d=a?t:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...i,ref:l})});return s.displayName=`Primitive.${r}`,{...n,[r]:s}},{}),pe="Tabs",[or]=qn(pe,[de]),Ze=de(),[ir,De]=or(pe),qe=c.forwardRef((n,r)=>{const{__scopeTabs:t,value:s,onValueChange:o,defaultValue:l,orientation:a="horizontal",dir:i,activationMode:d="automatic",...p}=n,x=Ne(i),[u,m]=te({prop:s,onChange:o,defaultProp:l??"",caller:pe});return e.jsx(ir,{scope:t,baseId:Tn(),value:u,onValueChange:m,orientation:a,dir:x,activationMode:d,children:e.jsx(me.div,{dir:x,"data-orientation":a,...p,ref:r})})});qe.displayName=pe;var Je="TabsList",Xe=c.forwardRef((n,r)=>{const{__scopeTabs:t,loop:s=!0,...o}=n,l=De(Je,t),a=Ze(t);return e.jsx(He,{asChild:!0,...a,orientation:l.orientation,dir:l.dir,loop:s,children:e.jsx(me.div,{role:"tablist","aria-orientation":l.orientation,...o,ref:r})})});Xe.displayName=Je;var Qe="TabsTrigger",en=c.forwardRef((n,r)=>{const{__scopeTabs:t,value:s,disabled:o=!1,...l}=n,a=De(Qe,t),i=Ze(t),d=tn(a.baseId,s),p=sn(a.baseId,s),x=s===a.value;return e.jsx(Ke,{asChild:!0,...i,focusable:!o,active:x,children:e.jsx(me.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":p,"data-state":x?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:d,...l,ref:r,onMouseDown:B(n.onMouseDown,u=>{!o&&u.button===0&&u.ctrlKey===!1?a.onValueChange(s):u.preventDefault()}),onKeyDown:B(n.onKeyDown,u=>{[" ","Enter"].includes(u.key)&&a.onValueChange(s)}),onFocus:B(n.onFocus,()=>{const u=a.activationMode!=="manual";!x&&!o&&u&&a.onValueChange(s)})})})});en.displayName=Qe;var nn="TabsContent",rn=c.forwardRef((n,r)=>{const{__scopeTabs:t,value:s,forceMount:o,children:l,...a}=n,i=De(nn,t),d=tn(i.baseId,s),p=sn(i.baseId,s),x=s===i.value,u=c.useRef(x);return c.useEffect(()=>{const m=requestAnimationFrame(()=>u.current=!1);return()=>cancelAnimationFrame(m)},[]),e.jsx(Rn,{present:o||x,children:({present:m})=>e.jsx(me.div,{"data-state":x?"active":"inactive","data-orientation":i.orientation,role:"tabpanel","aria-labelledby":d,hidden:!m,id:p,tabIndex:0,...a,ref:r,style:{...n.style,animationDuration:u.current?"0s":void 0},children:m&&l})})});rn.displayName=nn;function tn(n,r){return`${n}-trigger-${r}`}function sn(n,r){return`${n}-content-${r}`}var ar=qe,lr=Xe,cr=en,dr=rn;function ur({className:n,...r}){return e.jsx(ar,{"data-slot":"tabs",className:G("flex flex-col gap-2",n),...r})}function mr({className:n,...r}){return e.jsx(lr,{"data-slot":"tabs-list",className:G("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",n),...r})}function ge({className:n,...r}){return e.jsx(cr,{"data-slot":"tabs-trigger",className:G("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...r})}function he({className:n,...r}){return e.jsx(dr,{"data-slot":"tabs-content",className:G("flex-1 outline-none",n),...r})}function pr(n,r=[]){let t=[];function s(l,a){const i=c.createContext(a),d=t.length;t=[...t,a];const p=u=>{const{scope:m,children:h,...b}=u,N=m?.[n]?.[d]||i,P=c.useMemo(()=>b,Object.values(b));return e.jsx(N.Provider,{value:P,children:h})};p.displayName=l+"Provider";function x(u,m){const h=m?.[n]?.[d]||i,b=c.useContext(h);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${u}\` must be used within \`${l}\``)}return[p,x]}const o=()=>{const l=t.map(a=>c.createContext(a));return function(i){const d=i?.[n]||l;return c.useMemo(()=>({[`__scope${n}`]:{...i,[n]:d}}),[i,d])}};return o.scopeName=n,[s,fr(o,...r)]}function fr(...n){const r=n[0];if(n.length===1)return r;const t=()=>{const s=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const a=s.reduce((i,{useScope:d,scopeName:p})=>{const u=d(l)[`__scope${p}`];return{...i,...u}},{});return c.useMemo(()=>({[`__scope${r.scopeName}`]:a}),[a])}};return t.scopeName=r.scopeName,t}function xr(n){const r=gr(n),t=c.forwardRef((s,o)=>{const{children:l,...a}=s,i=c.Children.toArray(l),d=i.find(br);if(d){const p=d.props.children,x=i.map(u=>u===d?c.Children.count(p)>1?c.Children.only(null):c.isValidElement(p)?p.props.children:null:u);return e.jsx(r,{...a,ref:o,children:c.isValidElement(p)?c.cloneElement(p,void 0,x):null})}return e.jsx(r,{...a,ref:o,children:l})});return t.displayName=`${n}.Slot`,t}function gr(n){const r=c.forwardRef((t,s)=>{const{children:o,...l}=t;if(c.isValidElement(o)){const a=jr(o),i=vr(l,o.props);return o.type!==c.Fragment&&(i.ref=s?ce(s,a):a),c.cloneElement(o,i)}return c.Children.count(o)>1?c.Children.only(null):null});return r.displayName=`${n}.SlotClone`,r}var hr=Symbol("radix.slottable");function br(n){return c.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===hr}function vr(n,r){const t={...r};for(const s in r){const o=n[s],l=r[s];/^on[A-Z]/.test(s)?o&&l?t[s]=(...i)=>{const d=l(...i);return o(...i),d}:o&&(t[s]=o):s==="style"?t[s]={...o,...l}:s==="className"&&(t[s]=[o,l].filter(Boolean).join(" "))}return{...n,...t}}function jr(n){let r=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?n.ref:(r=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var yr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],se=yr.reduce((n,r)=>{const t=xr(`Primitive.${r}`),s=c.forwardRef((o,l)=>{const{asChild:a,...i}=o,d=a?t:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...i,ref:l})});return s.displayName=`Primitive.${r}`,{...n,[r]:s}},{}),on=["PageUp","PageDown"],an=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ln={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Q="Slider",[Se,_r,Sr]=In(Q),[cn]=pr(Q,[Sr]),[Cr,fe]=cn(Q),dn=c.forwardRef((n,r)=>{const{name:t,min:s=0,max:o=100,step:l=1,orientation:a="horizontal",disabled:i=!1,minStepsBetweenThumbs:d=0,defaultValue:p=[s],value:x,onValueChange:u=()=>{},onValueCommit:m=()=>{},inverted:h=!1,form:b,...N}=n,P=c.useRef(new Set),R=c.useRef(0),v=a==="horizontal"?wr:Nr,[I=[],Y]=te({prop:x,defaultProp:p,onChange:E=>{[...P.current][R.current]?.focus(),u(E)}}),f=c.useRef(I);function g(E){const w=Ir(I,E);D(E,w)}function F(E){D(E,R.current)}function L(){const E=f.current[R.current];I[R.current]!==E&&m(I)}function D(E,w,{commit:A}={commit:!1}){const k=Dr(l),oe=Vr(Math.round((E-s)/l)*l+s,k),z=We(oe,[s,o]);Y((q=[])=>{const Z=Tr(q,z,w);if($r(Z,d*l)){R.current=Z.indexOf(z);const Le=String(Z)!==String(q);return Le&&A&&m(Z),Le?Z:q}else return q})}return e.jsx(Cr,{scope:n.__scopeSlider,name:t,disabled:i,min:s,max:o,valueIndexToChangeRef:R,thumbs:P.current,values:I,orientation:a,form:b,children:e.jsx(Se.Provider,{scope:n.__scopeSlider,children:e.jsx(Se.Slot,{scope:n.__scopeSlider,children:e.jsx(v,{"aria-disabled":i,"data-disabled":i?"":void 0,...N,ref:r,onPointerDown:B(N.onPointerDown,()=>{i||(f.current=I)}),min:s,max:o,inverted:h,onSlideStart:i?void 0:g,onSlideMove:i?void 0:F,onSlideEnd:i?void 0:L,onHomeKeyDown:()=>!i&&D(s,0,{commit:!0}),onEndKeyDown:()=>!i&&D(o,I.length-1,{commit:!0}),onStepKeyDown:({event:E,direction:w})=>{if(!i){const oe=on.includes(E.key)||E.shiftKey&&an.includes(E.key)?10:1,z=R.current,q=I[z],Z=l*oe*w;D(q+Z,z,{commit:!0})}}})})})})});dn.displayName=Q;var[un,mn]=cn(Q,{startEdge:"left",endEdge:"right",size:"width",direction:1}),wr=c.forwardRef((n,r)=>{const{min:t,max:s,dir:o,inverted:l,onSlideStart:a,onSlideMove:i,onSlideEnd:d,onStepKeyDown:p,...x}=n,[u,m]=c.useState(null),h=X(r,v=>m(v)),b=c.useRef(void 0),N=Ne(o),P=N==="ltr",R=P&&!l||!P&&l;function K(v){const I=b.current||u.getBoundingClientRect(),Y=[0,I.width],g=Ve(Y,R?[t,s]:[s,t]);return b.current=I,g(v-I.left)}return e.jsx(un,{scope:n.__scopeSlider,startEdge:R?"left":"right",endEdge:R?"right":"left",direction:R?1:-1,size:"width",children:e.jsx(pn,{dir:N,"data-orientation":"horizontal",...x,ref:h,style:{...x.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:v=>{const I=K(v.clientX);a?.(I)},onSlideMove:v=>{const I=K(v.clientX);i?.(I)},onSlideEnd:()=>{b.current=void 0,d?.()},onStepKeyDown:v=>{const Y=ln[R?"from-left":"from-right"].includes(v.key);p?.({event:v,direction:Y?-1:1})}})})}),Nr=c.forwardRef((n,r)=>{const{min:t,max:s,inverted:o,onSlideStart:l,onSlideMove:a,onSlideEnd:i,onStepKeyDown:d,...p}=n,x=c.useRef(null),u=X(r,x),m=c.useRef(void 0),h=!o;function b(N){const P=m.current||x.current.getBoundingClientRect(),R=[0,P.height],v=Ve(R,h?[s,t]:[t,s]);return m.current=P,v(N-P.top)}return e.jsx(un,{scope:n.__scopeSlider,startEdge:h?"bottom":"top",endEdge:h?"top":"bottom",size:"height",direction:h?1:-1,children:e.jsx(pn,{"data-orientation":"vertical",...p,ref:u,style:{...p.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:N=>{const P=b(N.clientY);l?.(P)},onSlideMove:N=>{const P=b(N.clientY);a?.(P)},onSlideEnd:()=>{m.current=void 0,i?.()},onStepKeyDown:N=>{const R=ln[h?"from-bottom":"from-top"].includes(N.key);d?.({event:N,direction:R?-1:1})}})})}),pn=c.forwardRef((n,r)=>{const{__scopeSlider:t,onSlideStart:s,onSlideMove:o,onSlideEnd:l,onHomeKeyDown:a,onEndKeyDown:i,onStepKeyDown:d,...p}=n,x=fe(Q,t);return e.jsx(se.span,{...p,ref:r,onKeyDown:B(n.onKeyDown,u=>{u.key==="Home"?(a(u),u.preventDefault()):u.key==="End"?(i(u),u.preventDefault()):on.concat(an).includes(u.key)&&(d(u),u.preventDefault())}),onPointerDown:B(n.onPointerDown,u=>{const m=u.target;m.setPointerCapture(u.pointerId),u.preventDefault(),x.thumbs.has(m)?m.focus():s(u)}),onPointerMove:B(n.onPointerMove,u=>{u.target.hasPointerCapture(u.pointerId)&&o(u)}),onPointerUp:B(n.onPointerUp,u=>{const m=u.target;m.hasPointerCapture(u.pointerId)&&(m.releasePointerCapture(u.pointerId),l(u))})})}),fn="SliderTrack",xn=c.forwardRef((n,r)=>{const{__scopeSlider:t,...s}=n,o=fe(fn,t);return e.jsx(se.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...s,ref:r})});xn.displayName=fn;var Ce="SliderRange",gn=c.forwardRef((n,r)=>{const{__scopeSlider:t,...s}=n,o=fe(Ce,t),l=mn(Ce,t),a=c.useRef(null),i=X(r,a),d=o.values.length,p=o.values.map(m=>vn(m,o.min,o.max)),x=d>1?Math.min(...p):0,u=100-Math.max(...p);return e.jsx(se.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...s,ref:i,style:{...n.style,[l.startEdge]:x+"%",[l.endEdge]:u+"%"}})});gn.displayName=Ce;var we="SliderThumb",hn=c.forwardRef((n,r)=>{const t=_r(n.__scopeSlider),[s,o]=c.useState(null),l=X(r,i=>o(i)),a=c.useMemo(()=>s?t().findIndex(i=>i.ref.current===s):-1,[t,s]);return e.jsx(Pr,{...n,ref:l,index:a})}),Pr=c.forwardRef((n,r)=>{const{__scopeSlider:t,index:s,name:o,...l}=n,a=fe(we,t),i=mn(we,t),[d,p]=c.useState(null),x=X(r,K=>p(K)),u=d?a.form||!!d.closest("form"):!0,m=An(d),h=a.values[s],b=h===void 0?0:vn(h,a.min,a.max),N=Rr(s,a.values.length),P=m?.[i.size],R=P?Ar(P,b,i.direction):0;return c.useEffect(()=>{if(d)return a.thumbs.add(d),()=>{a.thumbs.delete(d)}},[d,a.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[i.startEdge]:`calc(${b}% + ${R}px)`},children:[e.jsx(Se.ItemSlot,{scope:n.__scopeSlider,children:e.jsx(se.span,{role:"slider","aria-label":n["aria-label"]||N,"aria-valuemin":a.min,"aria-valuenow":h,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...l,ref:x,style:h===void 0?{display:"none"}:n.style,onFocus:B(n.onFocus,()=>{a.valueIndexToChangeRef.current=s})})}),u&&e.jsx(bn,{name:o??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:h},s)]})});hn.displayName=we;var Er="RadioBubbleInput",bn=c.forwardRef(({__scopeSlider:n,value:r,...t},s)=>{const o=c.useRef(null),l=X(o,s),a=kn(r);return c.useEffect(()=>{const i=o.current;if(!i)return;const d=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(d,"value").set;if(a!==r&&x){const u=new Event("input",{bubbles:!0});x.call(i,r),i.dispatchEvent(u)}},[a,r]),e.jsx(se.input,{style:{display:"none"},...t,ref:l,defaultValue:r})});bn.displayName=Er;function Tr(n=[],r,t){const s=[...n];return s[t]=r,s.sort((o,l)=>o-l)}function vn(n,r,t){const l=100/(t-r)*(n-r);return We(l,[0,100])}function Rr(n,r){return r>2?`Value ${n+1} of ${r}`:r===2?["Minimum","Maximum"][n]:void 0}function Ir(n,r){if(n.length===1)return 0;const t=n.map(o=>Math.abs(o-r)),s=Math.min(...t);return t.indexOf(s)}function Ar(n,r,t){const s=n/2,l=Ve([0,50],[0,s]);return(s-l(r)*t)*t}function kr(n){return n.slice(0,-1).map((r,t)=>n[t+1]-r)}function $r(n,r){if(r>0){const t=kr(n);return Math.min(...t)>=r}return!0}function Ve(n,r){return t=>{if(n[0]===n[1]||r[0]===r[1])return r[0];const s=(r[1]-r[0])/(n[1]-n[0]);return r[0]+s*(t-n[0])}}function Dr(n){return(String(n).split(".")[1]||"").length}function Vr(n,r){const t=Math.pow(10,r);return Math.round(n*t)/t}var Fr=dn,Mr=xn,Lr=gn,Or=hn;function Br({className:n,defaultValue:r,value:t,min:s=0,max:o=100,...l}){const a=c.useMemo(()=>Array.isArray(t)?t:Array.isArray(r)?r:[s,o],[t,r,s,o]);return e.jsxs(Fr,{"data-slot":"slider",defaultValue:r,value:t,min:s,max:o,className:G("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",n),...l,children:[e.jsx(Mr,{"data-slot":"slider-track",className:G("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-1.5 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:e.jsx(Lr,{"data-slot":"slider-range",className:G("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:a.length},(i,d)=>e.jsx(Or,{"data-slot":"slider-thumb",className:"border-primary ring-ring/50 block size-4 shrink-0 rounded-full border bg-white shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},d))]})}function Gr(n,r=[]){let t=[];function s(l,a){const i=c.createContext(a),d=t.length;t=[...t,a];const p=u=>{const{scope:m,children:h,...b}=u,N=m?.[n]?.[d]||i,P=c.useMemo(()=>b,Object.values(b));return e.jsx(N.Provider,{value:P,children:h})};p.displayName=l+"Provider";function x(u,m){const h=m?.[n]?.[d]||i,b=c.useContext(h);if(b)return b;if(a!==void 0)return a;throw new Error(`\`${u}\` must be used within \`${l}\``)}return[p,x]}const o=()=>{const l=t.map(a=>c.createContext(a));return function(i){const d=i?.[n]||l;return c.useMemo(()=>({[`__scope${n}`]:{...i,[n]:d}}),[i,d])}};return o.scopeName=n,[s,zr(o,...r)]}function zr(...n){const r=n[0];if(n.length===1)return r;const t=()=>{const s=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const a=s.reduce((i,{useScope:d,scopeName:p})=>{const u=d(l)[`__scope${p}`];return{...i,...u}},{});return c.useMemo(()=>({[`__scope${r.scopeName}`]:a}),[a])}};return t.scopeName=r.scopeName,t}function Hr(n){const r=Kr(n),t=c.forwardRef((s,o)=>{const{children:l,...a}=s,i=c.Children.toArray(l),d=i.find(Ur);if(d){const p=d.props.children,x=i.map(u=>u===d?c.Children.count(p)>1?c.Children.only(null):c.isValidElement(p)?p.props.children:null:u);return e.jsx(r,{...a,ref:o,children:c.isValidElement(p)?c.cloneElement(p,void 0,x):null})}return e.jsx(r,{...a,ref:o,children:l})});return t.displayName=`${n}.Slot`,t}function Kr(n){const r=c.forwardRef((t,s)=>{const{children:o,...l}=t;if(c.isValidElement(o)){const a=Zr(o),i=Yr(l,o.props);return o.type!==c.Fragment&&(i.ref=s?ce(s,a):a),c.cloneElement(o,i)}return c.Children.count(o)>1?c.Children.only(null):null});return r.displayName=`${n}.SlotClone`,r}var Wr=Symbol("radix.slottable");function Ur(n){return c.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Wr}function Yr(n,r){const t={...r};for(const s in r){const o=n[s],l=r[s];/^on[A-Z]/.test(s)?o&&l?t[s]=(...i)=>{const d=l(...i);return o(...i),d}:o&&(t[s]=o):s==="style"?t[s]={...o,...l}:s==="className"&&(t[s]=[o,l].filter(Boolean).join(" "))}return{...n,...t}}function Zr(n){let r=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?n.ref:(r=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var qr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ge=qr.reduce((n,r)=>{const t=Hr(`Primitive.${r}`),s=c.forwardRef((o,l)=>{const{asChild:a,...i}=o,d=a?t:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...i,ref:l})});return s.displayName=`Primitive.${r}`,{...n,[r]:s}},{});function Jr(n){const r=Xr(n),t=c.forwardRef((s,o)=>{const{children:l,...a}=s,i=c.Children.toArray(l),d=i.find(et);if(d){const p=d.props.children,x=i.map(u=>u===d?c.Children.count(p)>1?c.Children.only(null):c.isValidElement(p)?p.props.children:null:u);return e.jsx(r,{...a,ref:o,children:c.isValidElement(p)?c.cloneElement(p,void 0,x):null})}return e.jsx(r,{...a,ref:o,children:l})});return t.displayName=`${n}.Slot`,t}function Xr(n){const r=c.forwardRef((t,s)=>{const{children:o,...l}=t;if(c.isValidElement(o)){const a=rt(o),i=nt(l,o.props);return o.type!==c.Fragment&&(i.ref=s?ce(s,a):a),c.cloneElement(o,i)}return c.Children.count(o)>1?c.Children.only(null):null});return r.displayName=`${n}.SlotClone`,r}var Qr=Symbol("radix.slottable");function et(n){return c.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Qr}function nt(n,r){const t={...r};for(const s in r){const o=n[s],l=r[s];/^on[A-Z]/.test(s)?o&&l?t[s]=(...i)=>{const d=l(...i);return o(...i),d}:o&&(t[s]=o):s==="style"?t[s]={...o,...l}:s==="className"&&(t[s]=[o,l].filter(Boolean).join(" "))}return{...n,...t}}function rt(n){let r=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning;return t?n.ref:(r=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=r&&"isReactWarning"in r&&r.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}var tt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],st=tt.reduce((n,r)=>{const t=Jr(`Primitive.${r}`),s=c.forwardRef((o,l)=>{const{asChild:a,...i}=o,d=a?t:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...i,ref:l})});return s.displayName=`Primitive.${r}`,{...n,[r]:s}},{}),jn="Toggle",yn=c.forwardRef((n,r)=>{const{pressed:t,defaultPressed:s,onPressedChange:o,...l}=n,[a,i]=te({prop:t,onChange:o,defaultProp:s??!1,caller:jn});return e.jsx(st.button,{type:"button","aria-pressed":a,"data-state":a?"on":"off","data-disabled":n.disabled?"":void 0,...l,ref:r,onClick:B(n.onClick,()=>{n.disabled||i(!a)})})});yn.displayName=jn;var U="ToggleGroup",[_n]=Gr(U,[de]),Sn=de(),Fe=M.forwardRef((n,r)=>{const{type:t,...s}=n;if(t==="single"){const o=s;return e.jsx(ot,{...o,ref:r})}if(t==="multiple"){const o=s;return e.jsx(it,{...o,ref:r})}throw new Error(`Missing prop \`type\` expected on \`${U}\``)});Fe.displayName=U;var[Cn,wn]=_n(U),ot=M.forwardRef((n,r)=>{const{value:t,defaultValue:s,onValueChange:o=()=>{},...l}=n,[a,i]=te({prop:t,defaultProp:s??"",onChange:o,caller:U});return e.jsx(Cn,{scope:n.__scopeToggleGroup,type:"single",value:M.useMemo(()=>a?[a]:[],[a]),onItemActivate:i,onItemDeactivate:M.useCallback(()=>i(""),[i]),children:e.jsx(Nn,{...l,ref:r})})}),it=M.forwardRef((n,r)=>{const{value:t,defaultValue:s,onValueChange:o=()=>{},...l}=n,[a,i]=te({prop:t,defaultProp:s??[],onChange:o,caller:U}),d=M.useCallback(x=>i((u=[])=>[...u,x]),[i]),p=M.useCallback(x=>i((u=[])=>u.filter(m=>m!==x)),[i]);return e.jsx(Cn,{scope:n.__scopeToggleGroup,type:"multiple",value:a,onItemActivate:d,onItemDeactivate:p,children:e.jsx(Nn,{...l,ref:r})})});Fe.displayName=U;var[at,lt]=_n(U),Nn=M.forwardRef((n,r)=>{const{__scopeToggleGroup:t,disabled:s=!1,rovingFocus:o=!0,orientation:l,dir:a,loop:i=!0,...d}=n,p=Sn(t),x=Ne(a),u={role:"group",dir:x,...d};return e.jsx(at,{scope:t,rovingFocus:o,disabled:s,children:o?e.jsx(He,{asChild:!0,...p,orientation:l,dir:x,loop:i,children:e.jsx(Ge.div,{...u,ref:r})}):e.jsx(Ge.div,{...u,ref:r})})}),le="ToggleGroupItem",Pn=M.forwardRef((n,r)=>{const t=wn(le,n.__scopeToggleGroup),s=lt(le,n.__scopeToggleGroup),o=Sn(n.__scopeToggleGroup),l=t.value.includes(n.value),a=s.disabled||n.disabled,i={...n,pressed:l,disabled:a},d=M.useRef(null);return s.rovingFocus?e.jsx(Ke,{asChild:!0,...o,focusable:!a,active:l,ref:d,children:e.jsx(ze,{...i,ref:r})}):e.jsx(ze,{...i,ref:r})});Pn.displayName=le;var ze=M.forwardRef((n,r)=>{const{__scopeToggleGroup:t,value:s,...o}=n,l=wn(le,t),a={role:"radio","aria-checked":n.pressed,"aria-pressed":void 0},i=l.type==="single"?a:void 0;return e.jsx(yn,{...i,...o,ref:r,onPressedChange:d=>{d?l.onItemActivate(s):l.onItemDeactivate(s)}})}),ct=Fe,dt=Pn;const ut=$n("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium hover:bg-muted hover:text-muted-foreground disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] outline-none transition-[color,box-shadow] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive whitespace-nowrap",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-xs hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}}),En=c.createContext({size:"default",variant:"default",spacing:0});function mt({className:n,variant:r,size:t,spacing:s=0,children:o,...l}){return e.jsx(ct,{"data-slot":"toggle-group","data-variant":r,"data-size":t,"data-spacing":s,style:{"--gap":s},className:G("group/toggle-group flex w-fit items-center gap-[--spacing(var(--gap))] rounded-md data-[spacing=default]:data-[variant=outline]:shadow-xs",n),...l,children:e.jsx(En.Provider,{value:{variant:r,size:t,spacing:s},children:o})})}function pt({className:n,children:r,variant:t,size:s,...o}){const l=c.useContext(En);return e.jsx(dt,{"data-slot":"toggle-group-item","data-variant":l.variant||t,"data-size":l.size||s,"data-spacing":l.spacing,className:G(ut({variant:l.variant||t,size:l.size||s}),"w-auto min-w-0 shrink-0 px-3 focus:z-10 focus-visible:z-10","data-[spacing=0]:rounded-none data-[spacing=0]:shadow-none data-[spacing=0]:first:rounded-l-md data-[spacing=0]:last:rounded-r-md data-[spacing=0]:data-[variant=outline]:border-l-0 data-[spacing=0]:data-[variant=outline]:first:border-l",n),...o,children:r})}const ft=["Sedan","SUV","Coupe","Truck","Van","Hatchback","Convertible","Wagon"],xt=["Gasoline","Diesel","Hybrid","Electric"],gt=[{value:"commute",label:"Daily Commute",icon:"mdi:car-commute"},{value:"family",label:"Family",icon:"mdi:account-group"},{value:"resale",label:"Resale / Business",icon:"mdi:cash"},{value:"fun",label:"Fun / Weekend",icon:"mdi:car-sports"},{value:"other",label:"Other",icon:"mdi:dots-horizontal"}],ht=["0-10","10-50","50+"];function Me(n,r){const t=typeof window<"u"?sessionStorage.getItem(`onboarding_${n}`):null,s=t?JSON.parse(t):null,o=Vn({...r,defaultValues:{...r?.defaultValues,...s}});return c.useEffect(()=>{const a=o.watch(i=>{sessionStorage.setItem(`onboarding_${n}`,JSON.stringify(i))});return()=>a.unsubscribe()},[o,n]),{form:o,triggerConfetti:()=>{const i=Date.now()+3e3,d={startVelocity:30,spread:360,ticks:60,zIndex:0},p=(u,m)=>Math.random()*(m-u)+u,x=setInterval(function(){const u=i-Date.now();if(u<=0)return clearInterval(x);const m=50*(u/3e3);Be({...d,particleCount:m,origin:{x:p(.1,.3),y:Math.random()-.2}}),Be({...d,particleCount:m,origin:{x:p(.7,.9),y:Math.random()-.2}})},250)}}}function bt(){const{t:n}=Pe(),[r,t]=c.useState(!1),[s,o]=c.useState(1),l=ue(),a=ie({budget_min:H().optional(),budget_max:H().optional(),body_types:ae($()).optional(),fuel_types:ae($()).optional(),usage_goal:_e(["commute","family","resale","fun","other"]).optional(),purchase_timeframe:_e(["immediate","1-3_months","3-6_months","planning"]).optional()}),{form:i,triggerConfetti:d}=Me("user",{resolver:Ee(a),defaultValues:{budget_min:5e3,budget_max:25e3,body_types:[],fuel_types:[]}});async function p(m){t(!0);try{O.success(n("onboarding.user.success")),d(),setTimeout(()=>{l("/")},1e3)}catch{O.error(n("onboarding.user.failure"))}finally{t(!1)}}const x=()=>o(2),u=()=>o(1);return e.jsxs(Re,{children:[e.jsxs(Ie,{children:[e.jsx(Ae,{children:n("onboarding.user.title")}),e.jsx(ke,{children:n("onboarding.user.step_indicator",{current:s,total:2,label:n(s===1?"onboarding.user.steps.budget_type":"onboarding.user.steps.usage_goals")})}),e.jsx("div",{className:"w-full h-2 bg-secondary rounded-full mt-2",children:e.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-300",style:{width:`${s/2*100}%`}})})]}),e.jsx($e,{children:e.jsx(Te,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(p),className:"space-y-6",children:[s===1&&e.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4 fade-in duration-300",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(j,{children:n("onboarding.user.budget_range")}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(y,{control:i.control,name:"budget_min",render:({field:m})=>e.jsxs(_,{className:"w-24",children:[e.jsx(S,{children:e.jsx(T,{type:"number",...m})}),e.jsx(C,{})]})}),e.jsx(Br,{min:0,max:1e5,step:1e3,value:[i.watch("budget_min")??0,i.watch("budget_max")??0],onValueChange:m=>{i.setValue("budget_min",m[0]),i.setValue("budget_max",m[1])},className:"flex-1"}),e.jsx(y,{control:i.control,name:"budget_max",render:({field:m})=>e.jsxs(_,{className:"w-24",children:[e.jsx(S,{children:e.jsx(T,{type:"number",...m})}),e.jsx(C,{})]})})]}),i.formState.errors.budget_max?.message&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:i.formState.errors.budget_max.message})]}),e.jsx(y,{control:i.control,name:"body_types",render:()=>e.jsxs(_,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(j,{className:"text-base",children:n("onboarding.user.body_types")})}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:ft.map(m=>e.jsx(y,{control:i.control,name:"body_types",render:({field:h})=>e.jsxs(_,{className:G("flex flex-row items-start space-x-3 space-y-0 rounded-md border p-2 cursor-pointer transition-colors",h.value?.includes(m)?"bg-primary/10 border-primary":"hover:bg-accent"),children:[e.jsx(S,{children:e.jsx(Ye,{checked:h.value?.includes(m),onCheckedChange:b=>b?h.onChange([...h.value||[],m]):h.onChange(h.value?.filter(N=>N!==m))})}),e.jsx(j,{className:"font-normal cursor-pointer w-full",children:m})]},m)},m))}),e.jsx(C,{})]})}),e.jsx(y,{control:i.control,name:"fuel_types",render:({field:m})=>e.jsxs(_,{children:[e.jsx(j,{children:n("onboarding.user.engine_pref")}),e.jsx(S,{children:e.jsx(mt,{type:"multiple",variant:"outline",value:m.value,onValueChange:m.onChange,children:xt.map(h=>e.jsx(pt,{value:h,className:"flex-1",children:h},h))})}),e.jsx(C,{})]})})]}),s===2&&e.jsx("div",{className:"space-y-6 animate-in slide-in-from-right-4 fade-in duration-300",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(y,{control:i.control,name:"usage_goal",render:({field:m})=>e.jsxs(_,{children:[e.jsx(j,{children:n("onboarding.user.usage")}),e.jsxs(be,{onValueChange:m.onChange,defaultValue:m.value,children:[e.jsx(S,{children:e.jsx(ve,{children:e.jsx(je,{placeholder:n("onboarding.placeholders.usage")})})}),e.jsx(ye,{children:gt.map(h=>e.jsx(J,{value:h.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(V,{icon:h.icon}),n(`onboarding.user.goals.${h.value}`)]})},h.value))})]}),e.jsx(C,{})]})}),e.jsx(y,{control:i.control,name:"purchase_timeframe",render:({field:m})=>e.jsxs(_,{children:[e.jsx(j,{children:n("onboarding.user.purchase_time")}),e.jsxs(be,{onValueChange:m.onChange,defaultValue:m.value,children:[e.jsx(S,{children:e.jsx(ve,{children:e.jsx(je,{placeholder:n("onboarding.placeholders.buying_time")})})}),e.jsxs(ye,{children:[e.jsx(J,{value:"immediate",children:n("onboarding.user.timeframes.immediate")}),e.jsx(J,{value:"1-3_months",children:n("onboarding.user.timeframes.1-3_months")}),e.jsx(J,{value:"3-6_months",children:n("onboarding.user.timeframes.3-6_months")}),e.jsx(J,{value:"planning",children:n("onboarding.user.timeframes.planning")})]})]}),e.jsx(C,{})]})})]})}),e.jsx(Bn,{className:"flex justify-between px-0 pt-4",children:s===1?e.jsxs(W,{type:"button",onClick:x,className:"w-full",children:[n("onboarding.user.next")," ",e.jsx(V,{icon:"mdi:arrow-right",className:"ml-2"})]}):e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsx(W,{type:"button",variant:"outline",onClick:u,className:"flex-1",children:n("onboarding.user.back")}),e.jsxs(W,{type:"submit",className:"flex-1",disabled:r,children:[r?e.jsx(V,{icon:"mdi:loading",className:"animate-spin mr-2"}):null,n("onboarding.user.submit")]})]})})]})})})]})}function vt(){const{t:n}=Pe(),[r,t]=c.useState(!1),s=ue(),o=ie({business_name:$().min(2,n("onboarding.dealer.validation.name_length")),tax_id:$().optional(),license_number:$().optional(),inventory_size:_e(["0-10","10-50","50+"]).optional(),feed_url:$().url(n("onboarding.dealer.validation.url_invalid")).optional().or(Fn(""))}),{form:l,triggerConfetti:a}=Me("dealer",{resolver:Ee(o),defaultValues:{business_name:"",tax_id:"",license_number:"",feed_url:""}});async function i(d){t(!0);try{O.success(n("onboarding.dealer.success")),a(),setTimeout(()=>{s("/")},1e3)}catch{O.error(n("onboarding.dealer.failure"))}finally{t(!1)}}return e.jsxs(Re,{children:[e.jsx(Ie,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Ae,{children:n("onboarding.dealer.title")}),e.jsx(ke,{children:n("onboarding.dealer.description")})]}),e.jsxs(Gn,{variant:"secondary",className:"flex gap-1 items-center",children:[e.jsx(V,{icon:"mdi:shield-check",className:"text-green-600"}),n("onboarding.dealer.program")]})]})}),e.jsx($e,{children:e.jsx(Te,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(i),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(y,{control:l.control,name:"business_name",render:({field:d})=>e.jsxs(_,{children:[e.jsx(j,{children:n("onboarding.dealer.business_name")}),e.jsx(S,{children:e.jsx(T,{placeholder:n("onboarding.placeholders.dealer_name"),...d})}),e.jsx(C,{})]})}),e.jsx(y,{control:l.control,name:"tax_id",render:({field:d})=>e.jsxs(_,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{children:n("onboarding.dealer.tax_id")}),e.jsxs(ee,{children:[e.jsx(ne,{type:"button",children:e.jsx(V,{icon:"mdi:help-circle-outline",className:"text-muted-foreground h-4 w-4"})}),e.jsx(re,{children:e.jsx("p",{children:n("onboarding.dealer.tax_id_desc")})})]})]}),e.jsx(S,{children:e.jsx(T,{placeholder:n("onboarding.placeholders.license"),...d})}),e.jsx(C,{})]})}),e.jsx(y,{control:l.control,name:"license_number",render:({field:d})=>e.jsxs(_,{children:[e.jsx(j,{children:n("onboarding.dealer.license")}),e.jsx(S,{children:e.jsx(T,{placeholder:n("onboarding.placeholders.dealer_license"),...d})}),e.jsx(C,{})]})}),e.jsx(y,{control:l.control,name:"inventory_size",render:({field:d})=>e.jsxs(_,{children:[e.jsx(j,{children:n("onboarding.dealer.inventory_size")}),e.jsxs(be,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(S,{children:e.jsx(ve,{children:e.jsx(je,{placeholder:n("onboarding.placeholders.sales_volume")})})}),e.jsx(ye,{children:ht.map(p=>e.jsxs(J,{value:p,children:[p," ",n("common.vehicle")]},p))})]}),e.jsx(C,{})]})})]}),e.jsx(y,{control:l.control,name:"feed_url",render:({field:d})=>e.jsxs(_,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{children:n("onboarding.dealer.feed_url")}),e.jsxs(ee,{children:[e.jsx(ne,{type:"button",children:e.jsx(V,{icon:"mdi:help-circle-outline",className:"text-muted-foreground h-4 w-4"})}),e.jsx(re,{children:e.jsx("p",{children:n("onboarding.dealer.feed_url_desc")})})]})]}),e.jsx(S,{children:e.jsx(T,{placeholder:n("onboarding.placeholders.feed_url"),...d})}),e.jsx(Mn,{children:n("onboarding.dealer.feed_format_hint")}),e.jsx(C,{})]})}),e.jsxs(W,{type:"submit",className:"w-full",disabled:r,children:[r?e.jsx(V,{icon:"mdi:loading",className:"animate-spin mr-2"}):null,n("onboarding.dealer.submit")]})]})})})]})}function jt(){const{t:n}=Pe(),[r,t]=c.useState(!1),[s,o]=c.useState(!1),[l,a]=c.useState(null),[i,d]=c.useState(null),[,p]=c.useState([]),{isAuthenticated:x,userRole:u,companyId:m}=Ue(),h=ue(),[b,N]=c.useState([]),[P,R]=c.useState(!0),K=ie({name:$().min(2,n("onboarding.company.validation.name_length")),slug:$().optional(),base_price:H().min(0,n("onboarding.company.validation.price_negative")),price_per_mile:H().min(0,n("onboarding.company.validation.price_negative")),customs_fee:H().min(0).optional(),service_fee:H().min(0).optional(),broker_fee:H().min(0).optional(),insurance:H().min(0).optional(),description:$().optional(),country:$().optional(),city:$().optional(),contact_email:$().email().optional(),website:$().url().optional(),established_year:H().optional(),phone_number:$().optional(),services:ae($()).optional(),social_links:ae(ie({id:Ln([$(),On()]).optional(),url:$().url()})).optional()}),{form:v,triggerConfetti:I}=Me("company",{resolver:Ee(K),defaultValues:{name:"",slug:"",base_price:0,price_per_mile:0,customs_fee:0,service_fee:0,broker_fee:0,insurance:0,description:"",country:"",city:"",phone_number:"",contact_email:"",website:"",established_year:new Date().getFullYear(),services:[],social_links:[]}});c.useEffect(()=>{if(!x||u!=="company"||!m)return;let f=!0;return o(!0),Kn(m).then(g=>{if(!g||!f)return;const F=Array.isArray(g.services)?g.services:[],L=Array.isArray(g.social_links)?g.social_links:[],D=(()=>{if(typeof g.established_year!="number"||Number.isNaN(g.established_year))return new Date(g.created_at).getFullYear();const k=g.established_year;if(k>=1900&&k<=2100)return k;const z=new Date(k*1e3).getUTCFullYear();return z>=1900&&z<=2100?z:new Date(g.created_at).getFullYear()})(),E=L.filter(k=>k&&typeof k.url=="string"&&k.url.trim().length>0).map(k=>({id:k.id,url:(k.url??"").trim()}));p(E.map(k=>k.url));let w=null;const A=typeof g.logo_url=="string"&&g.logo_url.trim().length>0?g.logo_url.trim():typeof g.logo=="string"&&g.logo.trim().length>0?g.logo.trim():null;A&&(A.startsWith(Oe)?w=A.slice(Oe.length)||"/":w=A),d(w),v.reset({name:g.name||"",slug:g.slug||"",base_price:Number(g.base_price)||0,price_per_mile:Number(g.price_per_mile)||0,customs_fee:Number(g.customs_fee)||0,service_fee:Number(g.service_fee)||0,broker_fee:Number(g.broker_fee)||0,insurance:g.insurance!=null&&Number(g.insurance)||0,description:g.description_eng||g.description_geo||g.description_rus||"",country:g.country||"",city:g.city||"",phone_number:g.phone_number||"",contact_email:g.contact_email||"",website:g.website||"",established_year:D,services:F,social_links:E})}).catch(g=>{}).finally(()=>{f&&o(!1)}),()=>{f=!1}},[x,u,m,v]),c.useEffect(()=>{let f=!0;async function g(){try{const F=await Hn();f&&N(F)}catch{}finally{f&&R(!1)}}return g(),()=>{f=!1}},[]);async function Y(f){if(!m){O.error(n("onboarding.company.failure"));return}t(!0);try{const g=Array.isArray(f.services)?f.services.filter(w=>typeof w=="string"&&w.trim().length>0):[],F=Array.isArray(f.social_links)?f.social_links.filter(w=>w&&typeof w.url=="string"&&w.url.trim().length>0):[],L=typeof f.established_year=="number"?f.established_year:new Date().getFullYear(),D={name:f.name,base_price:f.base_price,customs_fee:f.customs_fee??void 0,service_fee:f.service_fee??void 0,broker_fee:f.broker_fee??void 0,insurance:f.insurance??void 0,price_per_mile:f.price_per_mile,description:f.description||null,country:f.country||null,city:f.city||null,phone_number:f.phone_number||null,contact_email:f.contact_email||null,website:f.website||null,established_year:L,services:g.length>0?g:void 0};await Un(m,D);const E=F.filter(w=>!w.id);if(E.length>0){const w=A=>A.toLowerCase().includes("instagram.com")?"instagram":"facebook";await Promise.all(E.map(A=>Yn(m,"social",A.url.trim(),w(A.url))))}if(l)try{await Zn(m,l)}catch{O.error(n("onboarding.company.failure"));return}O.success(n("onboarding.company.success")),I(),setTimeout(()=>{h("/")},1e3)}catch{O.error(n("onboarding.company.failure"))}finally{t(!1)}}return e.jsxs(Re,{children:[e.jsxs(Ie,{children:[e.jsx(Ae,{children:n("onboarding.company.title")}),e.jsx(ke,{children:n("onboarding.company.description")})]}),e.jsx($e,{children:e.jsx(Te,{...v,children:e.jsxs("form",{onSubmit:v.handleSubmit(Y),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(y,{control:v.control,name:"name",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:n("onboarding.company.name")}),e.jsx(S,{children:e.jsx(T,{placeholder:n("onboarding.placeholders.company_name"),...f})}),e.jsx(C,{})]})}),e.jsx(y,{control:v.control,name:"slug",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:"Slug"}),e.jsx(S,{children:e.jsx(T,{placeholder:"company-slug",...f})}),e.jsx(C,{})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Company Logo"}),i&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:i,alt:"Current company logo",className:"h-12 w-12 rounded-md object-contain border"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Current logo"})]}),e.jsx(S,{children:e.jsx(T,{type:"file",accept:"image/*",onChange:f=>{const g=f.target.files?.[0]??null;a(g)}})}),e.jsx(C,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(y,{control:v.control,name:"contact_email",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:"Contact Email"}),e.jsx(S,{children:e.jsx(T,{type:"email",placeholder:"email@company.com",...f})}),e.jsx(C,{})]})}),e.jsx(y,{control:v.control,name:"phone_number",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:n("onboarding.company.contact_phone")}),e.jsx(S,{children:e.jsx(T,{placeholder:n("auth.placeholders.phone"),...f})}),e.jsx(C,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(y,{control:v.control,name:"country",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:"Country"}),e.jsx(S,{children:e.jsx(T,{placeholder:"Country",...f})}),e.jsx(C,{})]})}),e.jsx(y,{control:v.control,name:"city",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:"City"}),e.jsx(S,{children:e.jsx(T,{placeholder:"City",...f})}),e.jsx(C,{})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(y,{control:v.control,name:"website",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:"Website"}),e.jsx(S,{children:e.jsx(T,{placeholder:"https://example.com",...f})}),e.jsx(C,{})]})}),e.jsx(y,{control:v.control,name:"established_year",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:"Established Year"}),e.jsx(S,{children:e.jsx(T,{type:"number",placeholder:"e.g. 2015",...f})}),e.jsx(C,{})]})})]}),e.jsx(y,{control:v.control,name:"description",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:"Description"}),e.jsx(S,{children:e.jsx(zn,{placeholder:"Company description...",...f})}),e.jsx(C,{})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsx(y,{control:v.control,name:"base_price",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:n("onboarding.company.base_fee")}),e.jsx(S,{children:e.jsx(T,{type:"number",placeholder:"0",...f})}),e.jsx(C,{})]})}),e.jsx(y,{control:v.control,name:"price_per_mile",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:n("onboarding.company.price_per_mile")}),e.jsx(S,{children:e.jsx(T,{type:"number",placeholder:"0.00",step:"0.01",...f})}),e.jsx(C,{})]})}),e.jsx(y,{control:v.control,name:"customs_fee",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:"Customs Fee"}),e.jsx(S,{children:e.jsx(T,{type:"number",placeholder:"0",...f})}),e.jsx(C,{})]})}),e.jsx(y,{control:v.control,name:"service_fee",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:"Service Fee"}),e.jsx(S,{children:e.jsx(T,{type:"number",placeholder:"0",...f})}),e.jsx(C,{})]})}),e.jsx(y,{control:v.control,name:"broker_fee",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:"Broker Fee"}),e.jsx(S,{children:e.jsx(T,{type:"number",placeholder:"0",...f})}),e.jsx(C,{})]})}),e.jsx(y,{control:v.control,name:"insurance",render:({field:f})=>e.jsxs(_,{children:[e.jsx(j,{children:"Insurance"}),e.jsx(S,{children:e.jsx(T,{type:"number",placeholder:"0",...f})}),e.jsx(C,{})]})})]}),e.jsx(y,{control:v.control,name:"services",render:()=>e.jsxs(_,{children:[e.jsx("div",{className:"mb-4",children:e.jsx(j,{className:"text-base",children:n("onboarding.company.services")})}),P?e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(V,{icon:"mdi:loading",className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Loading services..."})]}):e.jsx("div",{className:"grid grid-cols-2 gap-2",children:b.map(f=>e.jsx(y,{control:v.control,name:"services",render:({field:g})=>e.jsxs(_,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(S,{children:e.jsx(Ye,{checked:g.value?.includes(f.name),onCheckedChange:F=>F?g.onChange([...g.value||[],f.name]):g.onChange(g.value?.filter(L=>L!==f.name))})}),e.jsx(j,{className:"font-normal",children:f.name})]},f.id)},f.id))}),e.jsx(C,{})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{children:"Social Links"}),v.watch("social_links")?.map((f,g)=>e.jsx(y,{control:v.control,name:`social_links.${g}.url`,render:({field:F})=>e.jsxs(_,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{children:e.jsx(T,{placeholder:"https://social.com/...",...F})}),e.jsx(W,{type:"button",variant:"ghost",size:"icon",onClick:async()=>{const L=v.getValues("social_links")||[],D=L[g];v.setValue("social_links",L.filter((w,A)=>A!==g));const E=(D?.url??"").trim();if(E&&p(w=>w.filter(A=>A!==E)),D&&D.id)try{await Wn(D.id)}catch{O.error(n("onboarding.company.failure"))}},children:e.jsx(V,{icon:"mdi:trash-can-outline",className:"h-4 w-4"})})]}),e.jsx(C,{})]})},g)),e.jsx(W,{type:"button",variant:"outline",size:"sm",onClick:()=>{const f=v.getValues("social_links")||[];v.setValue("social_links",[...f,{url:""}])},children:"Add Social Link"})]}),e.jsxs(W,{type:"submit",className:"w-full",disabled:r||s,children:[r?e.jsx(V,{icon:"mdi:loading",className:"animate-spin mr-2"}):null,n("onboarding.company.submit")]})]})})})]})}const kt=()=>{const[n,r]=c.useState("user"),[t,s]=c.useState(!0),[o,l]=c.useState(null),a=Dn(),i=ue(),{isAuthenticated:d,userRole:p}=Ue();c.useEffect(()=>{const u=setTimeout(()=>{s(!1)},800);return()=>clearTimeout(u)},[]),c.useEffect(()=>{if(d&&a.pathname==="/onboarding"){if(!p)return;let u=p;p==="dealer"?u="dealer":p==="company"?u="company":u="user",i(`/onboarding/${u}`,{replace:!0})}},[d,p,a.pathname,i]),c.useEffect(()=>{const u=a.pathname;let m=null;if(u.startsWith("/onboarding/")){const b=u.split("/")[2];(b==="user"||b==="dealer"||b==="company")&&(m=b)}if(!m){const b=new URLSearchParams(a.search).get("type");(b==="user"||b==="dealer"||b==="company")&&(m=b)}m&&(r(m),l(m))},[a.pathname,a.search]);const x=()=>{O.success("Progress saved! You can continue later."),i("/")};return t?e.jsx("div",{className:"min-h-screen bg-background flex flex-col items-center py-10 px-4",children:e.jsxs("div",{className:"w-full max-w-4xl space-y-8",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(xe,{className:"h-10 w-3/4 mx-auto mb-4"}),e.jsx(xe,{className:"h-4 w-1/2 mx-auto"})]}),e.jsx(xe,{className:"h-[400px] w-full rounded-xl"})]})}):e.jsx("div",{className:"min-h-screen bg-background flex flex-col items-center py-10 px-4",children:e.jsxs("div",{className:"w-full max-w-4xl space-y-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"text-center md:text-left space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Welcome to Trusted Importers"}),e.jsx("p",{className:"text-muted-foreground",children:"Let's customize your experience based on your role."})]}),e.jsxs(W,{variant:"outline",onClick:x,className:"hidden sm:flex",children:[e.jsx(V,{icon:"mdi:content-save-outline",className:"mr-2"}),"Save for Later"]})]}),e.jsxs(ur,{value:n,onValueChange:r,className:"w-full",children:[!o&&e.jsxs(mr,{className:"grid w-full grid-cols-3 h-auto p-1",children:[e.jsxs(ee,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(ge,{value:"user",className:"py-3 flex flex-col gap-1",children:[e.jsx(V,{icon:"mdi:account",className:"h-5 w-5"}),e.jsx("span",{children:"I'm a Buyer"})]})}),e.jsx(re,{children:e.jsx("p",{children:"Find cars to buy"})})]}),e.jsxs(ee,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(ge,{value:"dealer",className:"py-3 flex flex-col gap-1",children:[e.jsx(V,{icon:"mdi:store",className:"h-5 w-5"}),e.jsx("span",{children:"I'm a Dealer"})]})}),e.jsx(re,{children:e.jsx("p",{children:"Sell cars and manage inventory"})})]}),e.jsxs(ee,{children:[e.jsx(ne,{asChild:!0,children:e.jsxs(ge,{value:"company",className:"py-3 flex flex-col gap-1",children:[e.jsx(V,{icon:"mdi:truck-fast",className:"h-5 w-5"}),e.jsx("span",{children:"Logistics"})]})}),e.jsx(re,{children:e.jsx("p",{children:"Provide shipping and services"})})]})]}),e.jsx(he,{value:"user",className:"mt-6",children:e.jsx(bt,{})}),e.jsx(he,{value:"dealer",className:"mt-6",children:e.jsx(vt,{})}),e.jsx(he,{value:"company",className:"mt-6",children:e.jsx(jt,{})})]})]})})};export{kt as default};
