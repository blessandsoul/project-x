import{j as e,c as ie,I as p,a as Ae,x as De,b as Fe,w as Le,y as Te,r as g,z as Me,C as qe,B as P}from"./index-C04T5gy2.js";import{f as we}from"./formatDate-BODqZ6W4.js";import{C as F,a as G,b as Y,c as O}from"./card-Dh-gubiR.js";import{B as Oe}from"./badge-CVsfXjUk.js";import{E as Be}from"./EmptyState-Cf_l90Lx.js";import{D as Ue,a as He,b as Ve,c as We,d as Ge,e as Ye}from"./dialog-Ddsw5Wdu.js";import{L as xe}from"./label-BGPoHXjV.js";import{f as Xe,a as ne,c as Je,u as Ke,d as Qe}from"./companiesApi-GvtOqutn.js";var le=function(a,x){return a<x?-1:a>x?1:0},Ne=function(a){return a.reduce(function(x,u){return x+u},0)},Ze=(function(){function a(u){this.colors=u}var x=a.prototype;return x.palette=function(){return this.colors},x.map=function(u){return u},a})(),et=(function(){function a(n,t,c){return(n<<10)+(t<<5)+c}function x(n){var t=[],c=!1;function m(){t.sort(n),c=!0}return{push:function(r){t.push(r),c=!1},peek:function(r){return c||m(),r===void 0&&(r=t.length-1),t[r]},pop:function(){return c||m(),t.pop()},size:function(){return t.length},map:function(r){return t.map(r)},debug:function(){return c||m(),t}}}function u(n,t,c,m,r,l,h){var d=this;d.r1=n,d.r2=t,d.g1=c,d.g2=m,d.b1=r,d.b2=l,d.histo=h}function f(){this.vboxes=new x(function(n,t){return le(n.vbox.count()*n.vbox.volume(),t.vbox.count()*t.vbox.volume())})}function v(n,t){if(t.count()){var c=t.r2-t.r1+1,m=t.g2-t.g1+1,r=Math.max.apply(null,[c,m,t.b2-t.b1+1]);if(t.count()==1)return[t.copy()];var l,h,d,N,y=0,_=[],I=[];if(r==c)for(l=t.r1;l<=t.r2;l++){for(N=0,h=t.g1;h<=t.g2;h++)for(d=t.b1;d<=t.b2;d++)N+=n[a(l,h,d)]||0;_[l]=y+=N}else if(r==m)for(l=t.g1;l<=t.g2;l++){for(N=0,h=t.r1;h<=t.r2;h++)for(d=t.b1;d<=t.b2;d++)N+=n[a(h,l,d)]||0;_[l]=y+=N}else for(l=t.b1;l<=t.b2;l++){for(N=0,h=t.r1;h<=t.r2;h++)for(d=t.g1;d<=t.g2;d++)N+=n[a(h,d,l)]||0;_[l]=y+=N}return _.forEach(function(z,j){I[j]=y-z}),(function(z){var j,C,b,S,w,R=z+"1",k=z+"2",$=0;for(l=t[R];l<=t[k];l++)if(_[l]>y/2){for(b=t.copy(),S=t.copy(),w=(j=l-t[R])<=(C=t[k]-l)?Math.min(t[k]-1,~~(l+C/2)):Math.max(t[R],~~(l-1-j/2));!_[w];)w++;for($=I[w];!$&&_[w-1];)$=I[--w];return b[k]=w,S[R]=b[k]+1,[b,S]}})(r==c?"r":r==m?"g":"b")}}return u.prototype={volume:function(n){var t=this;return t._volume&&!n||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(n){var t=this,c=t.histo;if(!t._count_set||n){var m,r,l,h=0;for(m=t.r1;m<=t.r2;m++)for(r=t.g1;r<=t.g2;r++)for(l=t.b1;l<=t.b2;l++)h+=c[a(m,r,l)]||0;t._count=h,t._count_set=!0}return t._count},copy:function(){var n=this;return new u(n.r1,n.r2,n.g1,n.g2,n.b1,n.b2,n.histo)},avg:function(n){var t=this,c=t.histo;if(!t._avg||n){var m,r,l,h,d=0,N=0,y=0,_=0;if(t.r1===t.r2&&t.g1===t.g2&&t.b1===t.b2)t._avg=[t.r1<<3,t.g1<<3,t.b1<<3];else{for(r=t.r1;r<=t.r2;r++)for(l=t.g1;l<=t.g2;l++)for(h=t.b1;h<=t.b2;h++)d+=m=c[a(r,l,h)]||0,N+=m*(r+.5)*8,y+=m*(l+.5)*8,_+=m*(h+.5)*8;t._avg=d?[~~(N/d),~~(y/d),~~(_/d)]:[~~(8*(t.r1+t.r2+1)/2),~~(8*(t.g1+t.g2+1)/2),~~(8*(t.b1+t.b2+1)/2)]}}return t._avg},contains:function(n){var t=this,c=n[0]>>3;return gval=n[1]>>3,bval=n[2]>>3,c>=t.r1&&c<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},f.prototype={push:function(n){this.vboxes.push({vbox:n,color:n.avg()})},palette:function(){return this.vboxes.map(function(n){return n.color})},size:function(){return this.vboxes.size()},map:function(n){for(var t=this.vboxes,c=0;c<t.size();c++)if(t.peek(c).vbox.contains(n))return t.peek(c).color;return this.nearest(n)},nearest:function(n){for(var t,c,m,r=this.vboxes,l=0;l<r.size();l++)((c=Math.sqrt(Math.pow(n[0]-r.peek(l).color[0],2)+Math.pow(n[1]-r.peek(l).color[1],2)+Math.pow(n[2]-r.peek(l).color[2],2)))<t||t===void 0)&&(t=c,m=r.peek(l).color);return m},forcebw:function(){var n=this.vboxes;n.sort(function(r,l){return le(Ne(r.color),Ne(l.color))});var t=n[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(n[0].color=[0,0,0]);var c=n.length-1,m=n[c].color;m[0]>251&&m[1]>251&&m[2]>251&&(n[c].color=[255,255,255])}},{quantize:function(n,t){if(!Number.isInteger(t)||t<1||t>256)throw new Error("Invalid maximum color count. It must be an integer between 1 and 256.");if(!n.length||t<2||t>256||!n.length||t<2||t>256)return!1;for(var c=[],m=new Set,r=0;r<n.length;r++){var l=n[r],h=l.join(",");m.has(h)||(m.add(h),c.push(l))}if(c.length<=t)return new Ze(c);var d=(function(j){var C,b=new Array(32768);return j.forEach(function(S){C=a(S[0]>>3,S[1]>>3,S[2]>>3),b[C]=(b[C]||0)+1}),b})(n);d.forEach(function(){});var N=(function(j,C){var b,S,w,R=1e6,k=0,$=1e6,A=0,M=1e6,L=0;return j.forEach(function(T){(b=T[0]>>3)<R?R=b:b>k&&(k=b),(S=T[1]>>3)<$?$=S:S>A&&(A=S),(w=T[2]>>3)<M?M=w:w>L&&(L=w)}),new u(R,k,$,A,M,L,C)})(n,d),y=new x(function(j,C){return le(j.count(),C.count())});function _(j,C){for(var b,S=j.size(),w=0;w<1e3;){if(S>=C||w++>1e3)return;if((b=j.pop()).count()){var R=v(d,b),k=R[0],$=R[1];if(!k)return;j.push(k),$&&(j.push($),S++)}else j.push(b),w++}}y.push(N),_(y,.75*t);for(var I=new x(function(j,C){return le(j.count()*j.volume(),C.count()*C.volume())});y.size();)I.push(y.pop());_(I,t);for(var z=new f;I.size();)z.push(I.pop());return z}}})().quantize,ye=function(a){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=a.naturalWidth,this.height=this.canvas.height=a.naturalHeight,this.context.drawImage(a,0,0,this.width,this.height)};ye.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var B=function(){};B.prototype.getColor=function(a,x){return x===void 0&&(x=10),this.getPalette(a,5,x)[0]},B.prototype.getPalette=function(a,x,u){var f=(function(c){var m=c.colorCount,r=c.quality;if(m!==void 0&&Number.isInteger(m)){if(m===1)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");m=Math.max(m,2),m=Math.min(m,20)}else m=10;return(r===void 0||!Number.isInteger(r)||r<1)&&(r=10),{colorCount:m,quality:r}})({colorCount:x,quality:u}),v=new ye(a),n=(function(c,m,r){for(var l,h,d,N,y,_=c,I=[],z=0;z<m;z+=r)h=_[0+(l=4*z)],d=_[l+1],N=_[l+2],((y=_[l+3])===void 0||y>=125)&&(h>250&&d>250&&N>250||I.push([h,d,N]));return I})(v.getImageData().data,v.width*v.height,f.quality),t=et(n,f.colorCount);return t?t.palette():null},B.prototype.getColorFromUrl=function(a,x,u){var f=this,v=document.createElement("img");v.addEventListener("load",function(){var n=f.getPalette(v,5,u);x(n[0],a)}),v.src=a},B.prototype.getImageData=function(a,x){var u=new XMLHttpRequest;u.open("GET",a,!0),u.responseType="arraybuffer",u.onload=function(){if(this.status==200){var f=new Uint8Array(this.response);i=f.length;for(var v=new Array(i),n=0;n<f.length;n++)v[n]=String.fromCharCode(f[n]);var t=v.join(""),c=window.btoa(t);x("data:image/png;base64,"+c)}},u.send()},B.prototype.getColorAsync=function(a,x,u){var f=this;this.getImageData(a,function(v){var n=document.createElement("img");n.addEventListener("load",function(){var t=f.getPalette(n,5,u);x(t[0],this)}),n.src=v})};function tt({rating:a,size:x="sm",className:u,showValue:f=!0}){const v=x==="md"?"h-5 w-5":"h-4 w-4",n=x==="md"?"text-lg":"text-sm",t=Number.isFinite(a)?a.toFixed(1):"0.0";return e.jsxs("div",{className:ie("flex items-center",u),children:[e.jsx(p,{icon:"mdi:star",className:ie(v,"text-warning fill-current")}),f&&e.jsx("span",{className:ie(n,"font-semibold ml-1"),children:t})]})}function st({className:a,label:x,variant:u="default"}){const f={diamond:"bg-cyan-100 text-cyan-800 ring-1 ring-cyan-400/40",gold:"bg-amber-100 text-amber-800 ring-1 ring-amber-400/40",silver:"bg-slate-100 text-slate-700 ring-1 ring-slate-300/50",default:"bg-amber-500/10 text-amber-700 dark:text-amber-300 ring-1 ring-amber-400/40"},v=x??"VIP",n=u==="diamond"?"mdi:diamond-stone":"mdi:crown";return e.jsxs(Oe,{className:ie("text-xs font-bold uppercase tracking-wide rounded-full px-2 py-0.5 flex items-center gap-1 shadow-sm",f[u]||f.default,a),children:[e.jsx(p,{icon:n,className:"h-3 w-3"}),v]})}const at={facebook:{icon:"mdi:facebook",label:"Facebook"},instagram:{icon:"mdi:instagram",label:"Instagram"}},nt=({platform:a,url:x,className:u=""})=>{const f=at[a];return f?e.jsx("a",{href:x,target:"_blank",rel:"noopener noreferrer",title:f.label,"aria-label":f.label,className:`p-2.5 rounded-lg bg-slate-100 hover:bg-slate-200 transition-colors ${u}`,children:e.jsx(p,{icon:f.icon,className:"h-5 w-5 text-slate-600"})}):null},ht=()=>{const{t:a,i18n:x}=Ae(),{id:u}=De(),f=Fe(),v=Le(),{addRecentlyViewed:n}=Te(),[t,c]=g.useState(null),[m,r]=g.useState(!0),[l,h]=g.useState(null);g.useEffect(()=>{if(!u){r(!1);return}let s=!1;return r(!0),h(null),Xe(u).then(o=>{s||(c(o),r(!1))}).catch(o=>{s||(h("Failed to load company"),r(!1))}),()=>{s=!0}},[u]);const d=Me.filter(s=>s.companyId===(t?.id??"")),[N,y]=g.useState(!1),[_,I]=g.useState(!1),z=()=>{t?.contact?.phone&&(navigator.clipboard.writeText(t.contact.phone),I(!0),setTimeout(()=>I(!1),2e3))},[j,C]=g.useState([]),[b,S]=g.useState(1),[w,R]=g.useState(1),[k,$]=g.useState(!1),[A,M]=g.useState(null),[L,T]=g.useState(!1),[U,re]=g.useState(10),[X,oe]=g.useState(""),[J,he]=g.useState(!1),[pe,K]=g.useState(null),[ce,me]=g.useState(null),[de,Q]=g.useState(10),[Z,ee]=g.useState(""),[te,ue]=g.useState(!1),[fe,ge]=g.useState(!1),[H,_e]=g.useState([]),D=5,{user:be,userRole:se}=qe(),V=t?.logo??"",Ce=!!(t?.trustScore&&t.trustScore>=70),W=se==="user"||se==="dealer",ke=g.useMemo(()=>{if(!t)return"";const s=x.language;return s==="ka"&&t.description_geo?t.description_geo:s==="ru"&&t.description_rus?t.description_rus:t.description_eng||t.description_geo||t.description_rus||""},[t,x.language]);g.useEffect(()=>{if(!V)return;const s=new Image;s.crossOrigin="Anonymous",s.src=V,s.onload=()=>{try{const E=new B().getPalette(s,3);if(E&&E.length>0){const ae=E.map(q=>`${q[0]}, ${q[1]}, ${q[2]}`);_e(ae)}}catch{}}},[V]),g.useEffect(()=>{v.search&&f(v.pathname,{replace:!0})},[v.search,v.pathname,f]),g.useEffect(()=>{t?.id&&n(String(t.id))},[t?.id]),g.useEffect(()=>{if(!t?.id)return;let s=!1;return(async()=>{$(!0),M(null);try{const E=await ne(t.id,{limit:D,offset:(b-1)*D});if(s)return;C(Array.isArray(E.items)?E.items:[]),R(typeof E.totalPages=="number"&&E.totalPages>0?E.totalPages:1)}catch{if(s)return;M(a("company_profile.error.reviews_load"))}finally{s||$(!1)}})(),()=>{s=!0}},[t?.id,D,b,a]);const Se=async s=>{if(s.preventDefault(),!(!t||!W||J||U<1||U>10)){if(X.trim()&&X.trim().length<10){K(a("company_profile.error.review_length"));return}he(!0),K(null);try{await Je({company_id:Number(t.id),rating:U,comment:X.trim()}),re(10),oe(""),T(!1);const o=await ne(t.id,{limit:D,offset:(b-1)*D});C(Array.isArray(o.items)?o.items:[]),R(typeof o.totalPages=="number"&&o.totalPages>0?o.totalPages:1)}catch{K(a("company_profile.error.review_submit"))}finally{he(!1)}}},Re=s=>{me(String(s.id)),Q(s.rating),ee(s.comment||"")},Ee=()=>{me(null),Q(10),ee("")},Ie=async s=>{if(!(!t||!W||te)&&!(Z.trim()&&Z.trim().length<10)){ue(!0);try{await Ke(t.id,s,{rating:de,comment:Z.trim()||null}),me(null),Q(10),ee("");const o=await ne(t.id,{limit:D,offset:(b-1)*D});C(Array.isArray(o.items)?o.items:[]),R(typeof o.totalPages=="number"&&o.totalPages>0?o.totalPages:1)}catch{}finally{ue(!1)}}},Pe=async s=>{if(!(!t||!W||fe||!confirm(a("company_profile.reviews.delete_confirm")))){ge(!0);try{await Qe(t.id,s);const o=await ne(t.id,{limit:D,offset:(b-1)*D});C(Array.isArray(o.items)?o.items:[]),R(typeof o.totalPages=="number"&&o.totalPages>0?o.totalPages:1)}catch{}finally{ge(!1)}}},ze=s=>!be||!(se==="user"||se==="dealer")?!1:Number(be.id)===s.user_id;if(m)return e.jsx("div",{className:"flex-1 flex items-center justify-center bg-slate-50","aria-busy":"true",children:e.jsx(F,{className:"p-8 border-slate-200 bg-white shadow-sm",children:e.jsx("div",{className:"flex flex-col items-center gap-4",children:e.jsx(p,{icon:"mdi:loading",className:"h-8 w-8 animate-spin text-slate-400"})})})});if(!t)return e.jsx("div",{className:"flex-1 flex items-center justify-center bg-slate-50",children:e.jsx(F,{className:"p-8 border-slate-200 bg-white shadow-sm",children:e.jsx(Be,{icon:"mdi:alert-circle",title:a("company_profile.not_found.title"),description:a("company_profile.not_found.description"),action:e.jsx(P,{onClick:()=>f("/catalog"),className:"bg-primary hover:bg-primary/90 text-white",children:a("company_profile.not_found.back_to_catalog")})})})});const $e=H.length>=2?{background:`linear-gradient(135deg, 
          rgba(${H[0]}, 0.15) 0%, 
          rgba(${H[1]}, 0.1) 50%, 
          rgba(${H[2]||H[0]}, 0.05) 100%)`}:{};return e.jsxs("div",{className:"flex-1 flex flex-col relative min-h-screen",children:[e.jsx("div",{className:"fixed inset-0 pointer-events-none z-0 transition-all duration-1000",style:$e}),e.jsx("section",{className:"relative overflow-hidden z-10",children:e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"w-full px-4 lg:px-8 lg:max-w-[1440px] mx-auto pt-6 pb-8 lg:pt-8 lg:pb-10",children:[e.jsxs(P,{variant:"ghost",onClick:()=>f("/catalog"),className:"mb-6 text-slate-700 hover:text-slate-900 hover:bg-white/50",children:[e.jsx(p,{icon:"mdi:arrow-left",className:"me-2 h-4 w-4"}),a("company_profile.back")]}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-center lg:items-start lg:gap-8 text-center lg:text-start",children:[V&&e.jsx("div",{className:"relative mb-6 lg:mb-0 flex-shrink-0",children:e.jsx("div",{className:"w-28 h-28 lg:w-32 lg:h-32 mx-auto lg:mx-0 rounded-2xl border-white bg-white shadow-lg",children:e.jsx("img",{src:V,alt:t.name,className:"h-full w-full object-contain rounded-xl"})})}),e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-center lg:items-start justify-between gap-4 mb-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-center lg:justify-start gap-3 mb-3",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-slate-900 capitalize",children:t.name}),Ce&&e.jsx(st,{})]}),e.jsxs("div",{className:"flex flex-wrap justify-center lg:justify-start gap-2 text-sm mb-4",children:[e.jsxs("div",{className:"flex items-center bg-white/80 border border-slate-200 px-3 py-1.5 rounded-lg shadow-sm",children:[e.jsx(tt,{rating:t.rating,size:"sm"}),e.jsxs("span",{className:"ms-1.5 text-slate-600 font-medium",children:["(",t.reviewCount,")"]})]}),e.jsxs("div",{className:"flex items-center bg-white/80 border border-slate-200 px-3 py-1.5 rounded-lg shadow-sm text-slate-700",children:[e.jsx(p,{icon:"mdi:map-marker",className:"h-4 w-4 me-1.5 text-slate-500"}),e.jsxs("span",{className:"capitalize",children:[t.location?.city??"",t.location?.city&&t.location?.state?", ":"",t.location?.state??""]})]}),e.jsxs("div",{className:"flex items-center bg-white/80 border border-slate-200 px-3 py-1.5 rounded-lg shadow-sm text-slate-700",children:[e.jsx(p,{icon:"mdi:calendar",className:"h-4 w-4 me-1.5 text-slate-500"}),e.jsxs("span",{children:[a("company_profile.founded")," ",t.establishedYear]})]})]}),e.jsx("p",{className:"text-slate-600 mb-6 max-w-2xl mx-auto lg:mx-0 leading-relaxed",children:ke})]})}),e.jsxs("div",{className:"flex flex-row flex-wrap justify-center lg:justify-start gap-3 w-full lg:w-auto",children:[e.jsxs(Ue,{open:N,onOpenChange:y,children:[e.jsxs(P,{size:"lg",onClick:()=>y(!0),className:"bg-primary hover:bg-primary/90 text-white shadow-lg",children:[e.jsx(p,{icon:"mdi:phone",className:"me-2 h-5 w-5"}),a("company_profile.contact_btn")]}),e.jsxs(He,{className:"sm:max-w-[400px]",children:[e.jsx("div",{className:"flex justify-center -mt-2 mb-3",children:e.jsx("div",{className:"h-16 w-16 rounded-2xl bg-gradient-to-br from-green-500/10 to-emerald-600/10 flex items-center justify-center shadow-sm",children:e.jsx(p,{icon:"mdi:phone",className:"h-8 w-8 text-green-600"})})}),e.jsxs(Ve,{className:"text-center",children:[e.jsx(We,{className:"text-xl",children:a("company_profile.phone.title","Contact Phone")}),e.jsx(Ge,{className:"text-center",children:a("company_profile.phone.description","Call us directly")})]}),e.jsx("div",{className:"py-6",children:t.contact?.phone?e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("a",{href:`tel:${t.contact.phone}`,className:"lg:hidden block text-3xl font-bold text-slate-900 hover:text-green-600 transition-colors",children:t.contact.phone}),e.jsx("button",{onClick:z,className:"hidden lg:block w-full text-3xl font-bold text-slate-900 hover:text-green-600 transition-colors",title:a("company_profile.phone.click_to_copy","Click to copy"),children:t.contact.phone}),e.jsx("p",{className:"text-sm text-slate-500 lg:hidden",children:a("company_profile.phone.tap_to_call","Tap to call")}),e.jsx("p",{className:"hidden lg:block text-sm text-slate-500 h-5",children:_?e.jsxs("span",{className:"text-green-600 flex items-center justify-center gap-1 font-medium",children:[e.jsx(p,{icon:"mdi:check-circle",className:"h-4 w-4"}),a("company_profile.phone.copied","Copied!")]}):e.jsx("span",{className:"text-slate-400 group-hover:text-slate-600 transition-colors",children:a("company_profile.phone.click_to_copy","Click to copy")})})]}):e.jsx("p",{className:"text-center text-slate-500",children:a("company_profile.phone.not_available","Phone number not available")})}),e.jsx(Ye,{children:e.jsx(P,{variant:"outline",onClick:()=>y(!1),className:"w-full",children:a("common.close","Close")})})]})]}),t.contact?.website&&e.jsxs(P,{variant:"outline",size:"lg",className:"bg-white border-slate-300 text-slate-700 hover:bg-slate-50",onClick:()=>{const s=t.contact.website.startsWith("http")?t.contact.website:`https://${t.contact.website}`;window.open(s,"_blank","noopener,noreferrer")},children:[e.jsx(p,{icon:"mdi:web",className:"me-2 h-5 w-5"}),a("company_profile.website_btn")]})]})]})]})]})})}),e.jsx("main",{className:"flex-1 relative z-10 bg-white/60 backdrop-blur-sm",role:"main",children:e.jsx("div",{className:"w-full px-4 lg:px-8 lg:max-w-[1440px] mx-auto py-8",children:e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(F,{className:"border-slate-200 bg-white shadow-sm",children:[e.jsx(G,{children:e.jsx(Y,{className:"text-slate-900",children:a("company_profile.services.title")})}),e.jsx(O,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:(t.services??[]).map(s=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 border border-slate-100 rounded-lg",children:[e.jsx(p,{icon:"mdi:check-circle",className:"h-5 w-5 text-accent"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:a(`company_profile.services.items.${s.replace(/\s+/g,"_").toLowerCase()}`,s)})]},s))})})]}),d.length>0&&e.jsxs(F,{className:"border-slate-200 bg-white shadow-sm",children:[e.jsx(G,{children:e.jsx(Y,{className:"text-slate-900",children:a("company_profile.cars.title")})}),e.jsx(O,{children:e.jsx("div",{className:"grid gap-4 sm:grid-cols-2",children:d.slice(0,4).map(s=>e.jsxs("div",{className:"flex gap-3 rounded-lg border border-slate-200 bg-slate-50 p-3",children:[s.imageUrl&&e.jsx("img",{src:s.imageUrl,alt:`${s.make} ${s.model}`,className:"h-16 w-24 rounded-md object-cover"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("p",{className:"text-sm font-semibold text-slate-900",children:[s.year," ",s.make," ",s.model]}),e.jsxs("span",{className:"text-xs font-bold text-slate-900",children:["$",s.price.toLocaleString()]})]}),e.jsxs("p",{className:"text-xs text-slate-500",children:[s.bodyType," • ",s.fuelType," • ",s.transmission]}),e.jsxs("p",{className:"text-xs text-slate-500",children:[a("company_profile.cars.mileage"),": ",s.mileage.toLocaleString()," km"]})]})]},s.id))})})]}),e.jsxs(F,{className:"border-slate-200 bg-white shadow-sm",children:[e.jsx(G,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Y,{className:"text-slate-900",children:[a("company_profile.reviews.title")," (",t.reviewCount,")"]}),W&&e.jsxs(P,{variant:"outline",size:"sm",onClick:()=>T(!L),className:"flex items-center gap-2 border-slate-300 text-slate-700 hover:bg-slate-50",children:[e.jsx(p,{icon:"mdi:plus",className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:a("company_profile.reviews.write")})]})]})}),e.jsxs(O,{className:"space-y-4",children:[W&&L&&e.jsx(F,{className:"border-accent/30 bg-accent/5",children:e.jsx(O,{className:"pt-6",children:e.jsxs("form",{className:"space-y-4",onSubmit:Se,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(xe,{htmlFor:"review-comment",className:"text-slate-700",children:a("company_profile.reviews.your_rating")}),e.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[[1,2,3,4,5].map(s=>e.jsx("button",{type:"button",className:"focus:outline-none focus:ring-2 focus:ring-accent rounded hover:scale-110 transition-transform",onClick:()=>re(s*2),"aria-label":`${s} stars`,children:e.jsx(p,{icon:"mdi:star",className:`h-5 w-5 ${s*2<=U?"text-accent fill-current":"text-slate-300"}`})},s)),e.jsxs("span",{className:"ms-2 text-sm text-slate-500",children:[U," / 10"]})]})]}),e.jsx("textarea",{id:"review-comment",value:X,onChange:s=>oe(s.target.value),placeholder:a("company_profile.reviews.comment_placeholder"),className:"min-h-[100px] w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400",required:!0})]}),pe&&e.jsx("p",{className:"text-sm text-red-500",children:pe}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(P,{type:"submit",size:"sm",disabled:J,className:"flex items-center gap-2 bg-primary hover:bg-primary/90 text-white",children:[J&&e.jsx(p,{icon:"mdi:loading",className:"h-4 w-4 animate-spin"}),a("company_profile.reviews.submit")]}),e.jsx(P,{type:"button",variant:"outline",size:"sm",onClick:()=>{T(!1),re(10),oe(""),K(null)},disabled:J,className:"border-slate-300 text-slate-600 hover:bg-slate-50",children:a("company_profile.reviews.cancel")})]})]})})}),e.jsxs("div",{className:`space-y-4 ${L?"mt-6":""}`,children:[k&&e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((s,o)=>e.jsxs("div",{className:"animate-pulse space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-4 w-24 rounded bg-slate-200"}),e.jsx("div",{className:"h-3 w-16 rounded bg-slate-200"})]}),e.jsx("div",{className:"h-3 w-full rounded bg-slate-200"}),e.jsx("div",{className:"h-3 w-5/6 rounded bg-slate-200"})]},o))}),!k&&A&&e.jsx("p",{className:"text-sm text-red-500",children:A}),!k&&!A&&j.length===0&&e.jsx("p",{className:"text-sm text-slate-500",children:a("company_profile.reviews.empty")}),!k&&!A&&j.length>0&&e.jsx("div",{className:"space-y-4",children:j.map(s=>e.jsxs("div",{className:"border-b border-slate-100 last:border-b-0 pb-4 last:pb-0",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[s.avatar&&s.avatar.trim().length>0&&e.jsx("img",{src:s.avatar,alt:s.user_name||`${a("common.user")} #${s.user_id}`,className:"h-9 w-9 rounded-full object-cover border border-slate-200 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"font-medium text-sm sm:text-base text-slate-900 truncate",children:s.user_name&&s.user_name.trim().length>0?s.user_name:`${a("common.user")} #${s.user_id}`}),e.jsxs("div",{className:"flex items-center gap-2 ml-auto sm:ml-0",children:[ze(s)&&e.jsx("div",{className:"flex items-center gap-1",children:ce===String(s.id)?e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"ghost",size:"icon",onClick:()=>Ie(String(s.id)),disabled:te,className:"h-6 w-6",title:a("common.save"),children:te?e.jsx(p,{icon:"mdi:loading",className:"h-3.5 w-3.5 animate-spin"}):e.jsx(p,{icon:"mdi:check",className:"h-3.5 w-3.5 text-green-600"})}),e.jsx(P,{variant:"ghost",size:"icon",onClick:Ee,disabled:te,className:"h-6 w-6",title:a("common.cancel"),children:e.jsx(p,{icon:"mdi:close",className:"h-3.5 w-3.5 text-slate-400"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{variant:"ghost",size:"icon",onClick:()=>Re(s),className:"h-6 w-6 text-slate-400 hover:text-slate-700",title:a("common.edit"),children:e.jsx(p,{icon:"mdi:pencil",className:"h-3.5 w-3.5"})}),e.jsx(P,{variant:"ghost",size:"icon",onClick:()=>Pe(String(s.id)),disabled:fe,className:"h-6 w-6 text-slate-400 hover:text-red-500",title:a("common.delete"),children:e.jsx(p,{icon:"mdi:delete",className:"h-3.5 w-3.5"})})]})}),e.jsx("span",{className:"text-xs text-slate-500 whitespace-nowrap",children:we(s.created_at,x.language)})]})]}),e.jsx("div",{className:"flex items-center mt-1",children:[...Array(5)].map((o,E)=>{const ae=s.rating/2,q=E+1,ve=ae>=q,je=!ve&&ae>=q-.5;return e.jsx(p,{icon:je?"mdi:star-half-full":"mdi:star",className:`h-3.5 w-3.5 ${ve||je?"text-accent fill-current":"text-slate-300"}`},E)})})]})]}),ce===String(s.id)?e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(xe,{className:"text-sm font-medium text-slate-700",children:a("company_profile.reviews.your_rating")}),e.jsxs("div",{className:"flex items-center space-x-1 rtl:space-x-reverse",children:[[1,2,3,4,5].map(o=>e.jsx("button",{type:"button",className:"focus:outline-none focus:ring-2 focus:ring-accent rounded",onClick:()=>Q(o*2),"aria-label":`${o} stars`,children:e.jsx(p,{icon:"mdi:star",className:`h-5 w-5 ${o*2<=de?"text-accent fill-current":"text-slate-300"}`})},o)),e.jsxs("span",{className:"ms-2 text-sm text-slate-500",children:[de," / 10"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(xe,{htmlFor:`edit-comment-${s.id}`,className:"text-slate-700",children:a("company_profile.reviews.comment_label")}),e.jsx("textarea",{id:`edit-comment-${s.id}`,value:Z,onChange:o=>ee(o.target.value),placeholder:a("company_profile.reviews.comment_placeholder"),className:"min-h-[80px] w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm placeholder:text-slate-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-400"})]})]}):s.comment&&e.jsx("p",{className:"text-sm text-slate-600",children:s.comment}),!ce&&s.company_reply&&e.jsxs("div",{className:"mt-4 ms-2 sm:ms-0 p-4 bg-slate-50 border border-slate-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(p,{icon:"mdi:message-reply-text",className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"font-semibold text-sm text-slate-900",children:a("company_profile.reviews.response_from_admin","Response from %s administration",{replace:{company:t.name}}).replace("%s",t.name)})]}),e.jsx("p",{className:"text-sm text-slate-700 whitespace-pre-line leading-relaxed",children:s.company_reply}),s.company_reply_date&&e.jsx("p",{className:"text-xs text-slate-400 mt-2",children:we(s.company_reply_date,x.language)})]})]},`review-${s.id}-${s.created_at}`))}),w>1&&!A&&e.jsxs("div",{className:"flex items-center justify-between pt-2",children:[e.jsxs(P,{variant:"outline",size:"sm",disabled:k||b<=1,onClick:()=>S(s=>Math.max(1,s-1)),className:"border-slate-300 text-slate-600 hover:bg-slate-50",children:[e.jsx(p,{icon:"mdi:chevron-left",className:"h-4 w-4 me-1"}),a("company_profile.reviews.prev")]}),e.jsxs("span",{className:"text-sm text-slate-500",children:[b," / ",w]}),e.jsxs(P,{variant:"outline",size:"sm",disabled:k||b>=w,onClick:()=>S(s=>Math.min(w,s+1)),className:"border-slate-300 text-slate-600 hover:bg-slate-50",children:[a("company_profile.reviews.next"),e.jsx(p,{icon:"mdi:chevron-right",className:"h-4 w-4 ms-1"})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(F,{className:"border-slate-200 bg-white shadow-sm",children:[e.jsx(G,{children:e.jsx(Y,{className:"text-slate-900",children:a("company_profile.contact_info.title")})}),e.jsxs(O,{className:"space-y-4",children:[t.contact?.phone&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-slate-100",children:e.jsx(p,{icon:"mdi:phone",className:"h-5 w-5 text-slate-600"})}),e.jsx("p",{className:"font-medium text-slate-700",children:t.contact.phone})]}),t.contact?.email&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-slate-100",children:e.jsx(p,{icon:"mdi:email",className:"h-5 w-5 text-slate-600"})}),e.jsx("p",{className:"font-medium text-slate-700",children:t.contact.email})]}),t.contact?.website&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-slate-100",children:e.jsx(p,{icon:"mdi:web",className:"h-5 w-5 text-slate-600"})}),e.jsx("p",{className:"font-medium text-slate-700",children:t.contact.website})]}),(()=>{const s=t.social_links?.filter(o=>o.platform&&(o.platform==="facebook"||o.platform==="instagram")&&(!o.link_type||o.link_type==="social"))||[];return t.social_links&&t.social_links.length>0&&s.length>0?e.jsx("div",{className:"pt-4 border-t border-slate-100 mt-4",children:e.jsx("div",{className:"flex items-center justify-center gap-4",children:s.map((o,E)=>e.jsx(nt,{platform:o.platform,url:o.url},E))})}):null})()]})]}),e.jsxs(F,{className:"border-slate-200 bg-white shadow-sm",children:[e.jsx(G,{children:e.jsx(Y,{className:"text-slate-900",children:a("company_profile.stats.title")})}),e.jsx(O,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center p-4 rounded-xl bg-slate-50 border border-slate-100 text-center",children:[e.jsx(p,{icon:"mdi:star",className:"h-6 w-6 text-accent fill-current mb-2"}),e.jsx("span",{className:"text-xl font-bold text-slate-900",children:t.rating}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:a("company_profile.stats.rating")})]}),e.jsxs("div",{className:"flex flex-col items-center p-4 rounded-xl bg-slate-50 border border-slate-100 text-center",children:[e.jsx(p,{icon:"mdi:chat",className:"h-6 w-6 text-slate-600 mb-2"}),e.jsx("span",{className:"text-xl font-bold text-slate-900",children:t.reviewCount}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:a("company_profile.stats.reviews")})]}),e.jsxs("div",{className:"flex flex-col items-center p-4 rounded-xl bg-slate-50 border border-slate-100 text-center",children:[e.jsx(p,{icon:"mdi:calendar",className:"h-6 w-6 text-slate-600 mb-2"}),e.jsx("span",{className:"text-xl font-bold text-slate-900",children:t.establishedYear}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:a("company_profile.stats.founded")})]}),e.jsxs("div",{className:"flex flex-col items-center p-4 rounded-xl bg-slate-50 border border-slate-100 text-center",children:[e.jsx(p,{icon:"mdi:briefcase",className:"h-6 w-6 text-slate-600 mb-2"}),e.jsx("span",{className:"text-xl font-bold text-slate-900",children:t.services?.length??0}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:a("company_profile.stats.services")})]})]})})]})]})]})})})]})};export{ht as default};
