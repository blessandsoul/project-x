import{a as T,C as B,b as H,w as I,r as n,j as e,m as l,B as g,I as i,L as p,D as N,A as _,E as q}from"./index-C04T5gy2.js";import{C as P,a as z,b as O,c as W}from"./card-Dh-gubiR.js";import{L as b}from"./label-BGPoHXjV.js";import{S as Y}from"./SocialAuthButtons-DTuvQmx0.js";import{A as M,a as V,b as $,c as G,d as J,e as K,f as Q,g as U}from"./alert-dialog-hfEcdr6P.js";const ie=()=>{const{t:a}=T(),{login:C,reactivateAccount:A,isLoading:o}=B(),m=H(),j=I().state,[h,R]=n.useState(""),[u,D]=n.useState(""),[v,d]=n.useState(""),[k,c]=n.useState(!1),[r,f]=n.useState(null),[x,y]=n.useState(!1),S=async s=>{if(s.preventDefault(),d(""),!h||!u){d(a("auth.login.error.required"));return}try{await C(h,u);const t=j?.from?.pathname||"/";m(t,{replace:!0})}catch(t){if(t instanceof Error&&t.needsReactivation){const w=t;f({daysRemaining:w.daysRemaining,credentials:w.credentials}),c(!0);return}const L=t instanceof Error&&t.message?t.message:a("auth.login.error.generic");d(L)}},E=async()=>{if(r){y(!0);try{await A(r.credentials.identifier,r.credentials.password),c(!1),q.success(a("auth.reactivation.success","Account reactivated successfully!"));const s=j?.from?.pathname||"/";m(s,{replace:!0})}catch(s){const t=s instanceof Error&&s.message?s.message:a("auth.reactivation.error","Failed to reactivate account");c(!1),d(t)}finally{y(!1)}}},F=()=>{c(!1),f(null)};return e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 px-4 py-10",children:[e.jsx(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,ease:"easeOut"},className:"w-full max-w-md",children:e.jsxs(P,{className:"w-full shadow-lg border-0 sm:border sm:shadow-sm overflow-hidden",role:"form","aria-label":a("auth.login.title"),children:[e.jsxs(z,{className:"space-y-2 text-center pb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(g,{type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground",onClick:()=>m(-1),"aria-label":a("common.back"),children:e.jsx(i,{icon:"mdi:arrow-left",className:"h-4 w-4"})}),e.jsx(g,{asChild:!0,type:"button",variant:"ghost",size:"icon",className:"h-8 w-8 text-muted-foreground hover:text-foreground","aria-label":a("navigation.home"),children:e.jsx(p,{to:"/",children:e.jsx(i,{icon:"mdi:home",className:"h-4 w-4"})})})]}),e.jsx(p,{to:"/",className:"mx-auto flex items-center gap-2 mb-4",children:e.jsx(l.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary text-white shadow-lg shadow-primary/20",children:e.jsx(i,{icon:"mdi:shield-check",className:"h-6 w-6"})})}),e.jsx(O,{className:"text-2xl font-bold tracking-tight",children:a("auth.login.title")}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-xs mx-auto",children:a("auth.login.subtitle","Sign in to access your dashboard.")})]}),e.jsxs(W,{children:[e.jsxs("form",{onSubmit:S,className:"space-y-5","aria-busy":o,children:[e.jsxs(l.div,{layout:!0,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"email",children:a("auth.login.email")}),e.jsx(N,{id:"email",type:"email",value:h,onChange:s=>R(s.target.value),placeholder:"you@example.com",className:"h-11",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(b,{htmlFor:"password",children:a("auth.login.password")}),e.jsx(N,{id:"password",type:"password",value:u,onChange:s=>D(s.target.value),placeholder:"••••••••",className:"h-11",required:!0})]})]}),e.jsx(_,{children:v&&e.jsx(l.div,{initial:{opacity:0,height:0,y:-10},animate:{opacity:1,height:"auto",y:0},exit:{opacity:0,height:0,y:-10},className:"overflow-hidden",children:e.jsxs("div",{className:"p-3 rounded-md bg-destructive/10 text-destructive text-sm flex items-center gap-2",role:"alert",children:[e.jsx(i,{icon:"mdi:alert-circle",className:"h-4 w-4 shrink-0"}),v]})})}),e.jsx(l.div,{whileHover:{scale:1.01},whileTap:{scale:.99},children:e.jsx(g,{type:"submit",className:"w-full h-12 font-medium text-base shadow-lg shadow-primary/20 hover:shadow-xl hover:shadow-primary/30 transition-all",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(i,{icon:"mdi:loading",className:"mr-2 h-4 w-4 animate-spin"}),a("auth.login.loading")]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{icon:"mdi:login",className:"mr-2 h-5 w-5"}),a("auth.login.submit")]})})})]}),e.jsx("div",{className:"mt-6",children:e.jsx(Y,{isLoading:o,mode:"login"})}),e.jsxs("div",{className:"mt-8 text-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:a("auth.login.new_here","New here?")})})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a("auth.login.no_account")," ",e.jsx(p,{to:"/register",className:"font-medium text-primary hover:text-primary/90 hover:underline underline-offset-4",children:a("auth.login.register_link")})]})]})]})]})}),e.jsx(M,{open:k,onOpenChange:c,children:e.jsxs(V,{children:[e.jsxs($,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10 text-primary",children:e.jsx(i,{icon:"mdi:account-reactivate",className:"h-5 w-5"})}),e.jsx(G,{className:"text-xl",children:a("auth.reactivation.title","Welcome Back!")})]}),e.jsxs(J,{className:"space-y-3 text-left",children:[e.jsx("p",{children:a("auth.reactivation.description","Your account was scheduled for deletion.")}),r&&e.jsx("p",{className:"text-sm font-medium text-foreground",children:a("auth.reactivation.days_remaining",{count:r.daysRemaining,defaultValue:`You have ${r.daysRemaining} days remaining to reactivate.`})}),e.jsx("p",{className:"text-sm",children:a("auth.reactivation.prompt","Would you like to restore your account?")})]})]}),e.jsxs(K,{children:[e.jsx(Q,{onClick:F,disabled:x,children:a("common.cancel","Cancel")}),e.jsx(U,{onClick:E,disabled:x,className:"bg-primary hover:bg-primary/90",children:x?e.jsxs(e.Fragment,{children:[e.jsx(i,{icon:"mdi:loading",className:"mr-2 h-4 w-4 animate-spin"}),a("auth.reactivation.reactivating","Reactivating...")]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{icon:"mdi:account-check",className:"mr-2 h-4 w-4"}),a("auth.reactivation.button","Reactivate My Account")]})})]})]})})]})};export{ie as default};
